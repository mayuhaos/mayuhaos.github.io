(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{467:function(_,v,e){"use strict";e.r(v);var a=e(16),t=Object(a.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"常用orm"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#常用orm"}},[_._v("#")]),_._v(" 常用ORM")]),_._v(" "),v("p",[_._v("1.1、create方法：记录创建方法。创建记录的orm函数。页面新建点击保存时触发调用。返回值为创建成功的记录集。")]),_._v(" "),v("p",[_._v("1.2、write方法：记录更新方法。修改记录的orm函数。页面编辑点击保存时触发调用。返回值为布尔，True修改成功，False修改失败。")]),_._v(" "),v("p",[_._v("1.3、unlink方法：记录删除方法。删除记录的orm函数。页面点击删除时触发调用。删除成功返回True")]),_._v(" "),v("p",[_._v("1.4、search方法：记录查询方法。根据domain条件返回对应记录集，符合查询条件的记录集。")]),_._v(" "),v("p",[_._v("1.5、search_count方法：记录查询统计行数方法。根据domain条件查询符合条件的记录条数，返回值为整型，条件查询结果的条数。")]),_._v(" "),v("p",[_._v("1.5、read方法：记录数据获取方法。返回值为字典列表。")]),_._v(" "),v("p",[_._v("1.6、search_read方法：数据查询方法。返回值为数据集列表，符合查询条件的字典列表。")]),_._v(" "),v("p",[_._v("1.7、name_search方法：many2one字段点击时调用的方法")]),_._v(" "),v("p",[_._v("1.8、browse方法：使用id查询记录集方法。")]),_._v(" "),v("p",[_._v("1.9、ids方法：获取记录集中的id列表。")]),_._v(" "),v("p",[_._v("1.10、exists方法：返回存在于数据库的记录。")]),_._v(" "),v("p",[_._v("1.11、ensure_one方法：校验记录集是否为单例。")]),_._v(" "),v("p",[_._v("1.12、mapped方法：读取记录集字段值。")]),_._v(" "),v("p",[_._v("1.13、filtered方法：记录集筛选。")]),_._v(" "),v("p",[_._v("1.14、filtered_domain方法：domian格式记录集筛选。")]),_._v(" "),v("p",[_._v("1.15、sorted方法：记录集排序")]),_._v(" "),v("p",[_._v("1.16、_auto_init方法：模块升级安装模型初始化方法。")]),_._v(" "),v("p",[_._v("1.17、init方法：模块升级安装模型初始化方法")]),_._v(" "),v("p",[_._v("1.18、fields_get_keys方法：模型字段名称获取方法。")]),_._v(" "),v("p",[_._v("1.19、copy方法：记录复制方法。")]),_._v(" "),v("h4",{attrs:{id:"odoo中env的讲解"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#odoo中env的讲解"}},[_._v("#")]),_._v(" odoo中env的讲解")]),_._v(" "),v("p",[_._v("uid：当前用户的id，res_users表的id")]),_._v(" "),v("p",[_._v("user：当前用户的数据对象，res.users的数据对象")]),_._v(" "),v("p",[_._v("company：当前公司的数据对象")]),_._v(" "),v("p",[_._v("companys：用户允许访问的公司的数据对象")]),_._v(" "),v("p",[_._v("cr：链接postgresql数据的游标对象")]),_._v(" "),v("p",[_._v("context：上下文，字典格式，不可修改")]),_._v(" "),v("p",[_._v("su：是否有超级用户的权限，是个Boolean值")]),_._v(" "),v("p",[_._v("1、sudo方法：赋予超级权限。")]),_._v(" "),v("p",[_._v("2、with_user方法：替换记录集用户。")]),_._v(" "),v("p",[_._v("3、with_context方法：替换记录集上下文。调用的时候需要特别注意，不适当的调用方法会丢失上下文已有数据")]),_._v(" "),v("p",[_._v("4、env中的ref方法，作用是通过xml数据文件中定义的外部ID（模型名.record标签中的id名称）找到对应模型的数据记录")]),_._v(" "),v("p",[_._v("1、odoo中多公司的控制，用户当前公司env.company，用户当前已勾选公司allowed_company_ids")]),_._v(" "),v("p",[_._v("2、还可以通过上下文给字段赋默认值default_字段名，给搜索视图赋默认值search_default_搜索视图相关名称")]),_._v(" "),v("p",[_._v("3、One2many、Many2many字段快捷命令操作")]),_._v(" "),v("h4",{attrs:{id:"many2many"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#many2many"}},[_._v("#")]),_._v(" Many2many")]),_._v(" "),v("p",[_._v("(0,0,{values}) 根据values里面的信息新建一个记录。")]),_._v(" "),v("p",[_._v("(1,ID,{values})更新id=ID的记录（写入values里面的数据）")]),_._v(" "),v("p",[_._v("(2,ID) 删除id=ID的数据（调用unlink方法，删除数据以及整个主从数据链接关系）")]),_._v(" "),v("p",[_._v("(3,ID) 切断主从数据的链接关系但是不删除这个数据")]),_._v(" "),v("p",[_._v("(4,ID) 为id=ID的数据添加主从链接关系。")]),_._v(" "),v("p",[_._v("(5) 删除所有的从数据的链接关系就是向所有的从数据调用(3,ID)")]),_._v(" "),v("p",[_._v("(6,0,[IDs]) 用IDs里面的记录替换原来的记录（就是先执行(5)再执行循环IDs执行（4,ID））")]),_._v(" "),v("h4",{attrs:{id:"one2many"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#one2many"}},[_._v("#")]),_._v(" one2many")]),_._v(" "),v("p",[_._v("(0, 0,{ values })根据values里面的信息新建一个记录。")]),_._v(" "),v("p",[_._v("(1,ID,{values}) 更新id=ID的记录（对id=ID的执行write 写入values里面的数据）")]),_._v(" "),v("p",[_._v("(2,ID) 删除id=ID的数据（调用unlink方法，删除数据以及整个主从数据链接关系）")]),_._v(" "),v("h2",{attrs:{id:"常用装饰器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#常用装饰器"}},[_._v("#")]),_._v(" 常用装饰器")]),_._v(" "),v("p",[_._v("2.1、api.constrains:")]),_._v(" "),v("p",[_._v("数据校验修饰器。输入参数为模型字段名称。例如@api.constrains('name', 'description')")]),_._v(" "),v("p",[_._v("绑定方法，用于字段值校验。")]),_._v(" "),v("p",[_._v("2.2、api.onchange:")]),_._v(" "),v("p",[_._v("数据变动修饰器。输入参数为模型字段名称。例如@api.onchange('partner_id')")]),_._v(" "),v("p",[_._v("绑定方法，当参数值字段变动时触发调用函数。用于页面数据变动，计算其他字段值。")]),_._v(" "),v("p",[_._v("2.3、api.depends:")]),_._v(" "),v("p",[_._v("计算依赖修饰器。输入参数为模型字段名称。例如@api.depends('name', 'partner_id.name', 'partner_id.is_company')")]),_._v(" "),v("p",[_._v("用于修饰计算字段的计算方法，参数值字段变化时触发计算。")]),_._v(" "),v("p",[_._v("2.4、api.model:")]),_._v(" "),v("p",[_._v("模型修饰器。使用该修饰器的方法，第一个参数self会去除记录集ids，只带有模型相关属性。")]),_._v(" "),v("p",[_._v("2.5、api.model_create_multi:")]),_._v(" "),v("p",[_._v("多例创建修饰器。用于对重新的create方法修饰，使函数入参变成list多例模式")]),_._v(" "),v("h2",{attrs:{id:"搜索功能的用法"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#搜索功能的用法"}},[_._v("#")]),_._v(" 搜索功能的用法")]),_._v(" "),v("p",[_._v("1、模型的_rec_name属性")]),_._v(" "),v("p",[_._v("2、模型自动创建的计算字段display_name，搜索源码_compute_display_name查看对应方法")]),_._v(" "),v("p",[_._v("3、name_get方法：返回“self”中记录的文本表示。 默认情况下，这是“display_name”字段的值")]),_._v(" "),v("p",[_._v("4、name_search方法：搜索字段与给定匹配的记录")]),_._v(" "),v("p",[_._v("5、search_read方法：执行 :meth:"),v("code",[_._v("search")]),_._v("，然后执行 :meth:"),v("code",[_._v("read")]),_._v("。")]),_._v(" "),v("p",[_._v("6、domain表达式详解：https://www.cnblogs.com/ygj0930/p/10826127.html")]),_._v(" "),v("blockquote",[v("p",[_._v("domain表达式是一个条件列表，每个条件是一个形如('field_name', 'operator', value')的元组。")]),_._v(" "),v("p",[_._v("filed_name 是需要筛选的字段，它可以使用点（.）来访问关系模块的字段。")]),_._v(" "),v("p",[_._v("value 是一个Python表达式的值。它可以使用字符值，比如：字符串，数字，布尔值，或则列表、某个字段、用户在context中自定义的有效的值。")]),_._v(" "),v("p",[_._v("operator 可以为：")]),_._v(" "),v("p",[_._v("常用的操作符：<,>,<=,>=,=,!=。")]),_._v(" "),v("p",[_._v("'=like'通配符，使用下划线(_)时，匹配一个任意字符，使用百分号(%)时，匹配多个字符。")]),_._v(" "),v("p",[_._v("'like'匹配一个’%value%’的字符串。’ilike’与此类似但不区分大小写。‘not like’和‘not ilike’也可以使用")]),_._v(" "),v("p",[_._v("'child of'在层级关系中，筛选子集")]),_._v(" "),v("p",[_._v("'in'和’not in’筛选是否在一个列表里面，所以给的值应该是个list。当在’to-many’的关系字段中，‘in’的作用和contains的作用一样")])]),_._v(" "),v("h2",{attrs:{id:"自带工具函数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#自带工具函数"}},[_._v("#")]),_._v(" 自带工具函数")]),_._v(" "),v("p",[v("strong",[_._v("路径在odoo/odoo/tools中")])]),_._v(" "),v("p",[_._v("1、比较常用的小数工具float_utils.py")]),_._v(" "),v("p",[_._v("1.1、float_round")]),_._v(" "),v("p",[_._v("1.2、float_is_zero")]),_._v(" "),v("p",[_._v("1.3、float_compare")]),_._v(" "),v("p",[_._v("2、比较常用的日期处理工具date_utils.py")]),_._v(" "),v("p",[_._v("3、获取项目启动时加载的配置信息config.py")]),_._v(" "),v("p",[_._v("4、比较常用的分组数据的函数misc.py里的groupby。（和python里itertools.groupby的区别）")]),_._v(" "),v("p",[_._v("5、自动计算行号")]),_._v(" "),v("p",[_._v("6、序列初始化和调用")]),_._v(" "),v("p",[_._v("7、快码初始化和使用")]),_._v(" "),v("h2",{attrs:{id:"前端常用挂件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#前端常用挂件"}},[_._v("#")]),_._v(" 前端常用挂件")]),_._v(" "),v("p",[_._v("1、tree视图字段链接：需要点击的字段添加，options=\"{'field_click': true, 'function_name': 'jump_to_writeoff_head'}\"")]),_._v(" "),v("p",[_._v("2、行禁止打开：one2many字段上添加，options=\"{'no_edit_no_open':1}\"")]),_._v(" "),v("p",[_._v("3、wizard动作在tree上生成按钮：")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://gitee.com/yuhaostudy/blogimages/raw/master/%20images/202306222208578.png",alt:"image-20230622220817478"}})]),_._v(" "),v("p",[_._v('4、M2O字段选择去重：widget="o2m_unique"')]),_._v(" "),v("p",[_._v("5、行删除按钮前置：tree标签添加，delete_forward=”1”")]),_._v(" "),v("p",[_._v("6、复制，编辑，删除按钮按条件隐藏，form标签上添加，编辑按钮控制：edit_control，复制按钮控制：copy_control")]),_._v(" "),v("p",[_._v("删除按钮控制：delete_control，例如，edit_control=\"[('state','=','created')]\"")])])}),[],!1,null,null,null);v.default=t.exports}}]);