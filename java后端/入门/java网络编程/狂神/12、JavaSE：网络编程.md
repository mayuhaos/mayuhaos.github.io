[//]: # (<A1-JavaSEé›¶åŸºç¡€è®²ä¹‰/>)

# ç½‘ç»œç¼–ç¨‹:hatching_chick::hatching_chick::hatching_chick:

::: tip ğŸ£ğŸ£ğŸ£
è¿™ä¸€èŠ‚æ²¡æ—¶é—´çš„è¯å¯ä»¥ä¸çœ‹å“¦<br>æœ¬èŠ‚ä¸»è¦è®²çš„æ˜¯socketç¼–ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼æ—¶æ—¶é€šä¿¡ï¼Œå¾®ä¿¡QQèŠå¤©<br>
æˆ‘ä¹‹æ‰€ä»¥å­¦è¿™èŠ‚æ˜¯å› ä¸ºæˆ‘å¤§äºŒçš„æ—¶å€™ï¼Œè½¯ä»¶å·¥ç¨‹è¯¾è®¾éœ€è¦æˆ‘ä»¬åšä¸€ä¸ªâ€œæ—¶é—´åŒæ­¥æœåŠ¡å™¨â€ï¼Œ
å¦‚ä¸‹ï¼š<br>
[æ—¶é—´å›å“: æ—¶é—´å›å“æœåŠ¡å™¨+GUI (gitee.com)](https://gitee.com/yhstu/time-echo)
<br>
![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/images/202402061307669.png)
æ„Ÿå…´è¶£å¯ä»¥å­¦ä¸€ä¸‹å“¦ï¼Œåœ¨webå¼€å‘å·¥ä½œä¸­ä½¿ç”¨éå¸¸å°‘~
<br/><br/>

- **çœ‹å®Œæœ¬èŠ‚é…åˆä¸‹ä¸€èŠ‚javaGUIå¯ä»¥å¼€å‘ä¸€ä¸ªèŠå¤©å®¤å“¦ï¼**
- **<p style="color:red">è¿™ä¸€èŠ‚æ²¡æ—¶é—´çš„è¯å¯ä»¥ä¸çœ‹å“¦~</p>**

# 1ã€ç½‘ç»œç¼–ç¨‹æ¦‚è¿°

# 1.1ã€æ¦‚è¿°

Javaæ˜¯Internetä¸Šçš„è¯­è¨€ï¼Œå®ƒä»è¯­è¨€çº§ä¸Šæä¾›äº†å¯¹ç½‘ç»œåº”ç”¨ç¨‹åºçš„æ”¯æŒï¼Œç¨‹åºå‘˜èƒ½å¤Ÿå¾ˆå®¹æ˜“å¼€å‘å¸¸è§çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚Javaæä¾›çš„ç½‘ç»œç±»åº“ï¼Œå¯ä»¥å®ç°æ— ç—›çš„ç½‘ç»œè¿æ¥ï¼Œè”ç½‘çš„åº•å±‚ç»†èŠ‚è¢«éšè—åœ¨Javaçš„æœ¬æœºå®‰è£…ç³»ç»Ÿé‡Œï¼Œç”±JVMè¿›è¡Œæ§åˆ¶ã€‚å¹¶ä¸”Javaå®ç°äº†ä¸€ä¸ªè·¨å¹³å°çš„ç½‘ç»œåº“ï¼Œç¨‹åºå‘˜é¢å¯¹çš„æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„ç½‘ç»œç¼–ç¨‹ç¯å¢ƒã€‚

# è®¡ç®—æœºç½‘ç»œï¼š

æŠŠåˆ†å¸ƒåœ¨ä¸åŒåœ°ç†åŒºåŸŸçš„è®¡ç®—æœºä¸ä¸“é—¨çš„å¤–éƒ¨è®¾å¤‡ç”¨é€šä¿¡çº¿è·¯äº’è¿æˆä¸€ä¸ªè§„æ¨¡å¤§ï¼ŒåŠŸèƒ½å¼ºçš„ç½‘ç»œç³»ç»Ÿï¼Œä»è€Œä½¿ä¼—å¤šçš„è®¡ç®—æœºå¯ä»¥æ–¹ä¾¿åœ°äº’ç›¸ä¼ é€’ä¿¡æ¯ï¼Œå…±äº«ç¡¬ä»¶ï¼Œè½¯ä»¶ï¼Œæ•°æ®ä¿¡æ¯ç­‰èµ„æºã€‚

ã€ç™¾åº¦ï¼šåœ°çƒæ‘ã€‘åœ¨å‡ ä¸ªä¸–çºªä¹‹å‰ï¼Œä½ éƒ½ä¸æ•¢æƒ³ä½ åœ¨åŒ—äº¬è¯´è¯ï¼Œç¾å›½éƒ½èƒ½å¬åˆ°ï¼

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704138.jpg)

# ç½‘ç»œç¼–ç¨‹çš„ç›®çš„ï¼š

ç›´æ¥æˆ–é—´æ¥åœ°é€šè¿‡ç½‘ç»œåè®®ä¸å…¶ä»–è®¡ç®—æœºå®ç°æ•°æ®äº¤æ¢ï¼Œè¿›è¡Œé€šè®¯ã€‚

1. å¦‚ä½•å‡†ç¡®çš„å®šä½ç½‘ç»œä¸Šçš„ä¸€å°æˆ–å¤šå°ä¸»æœºï¼Œå®šä½ä¸»æœºä¸Šçš„ç‰¹å®šçš„åº”ç”¨
2. æ‰¾åˆ°ä¸»æœºåå¦‚ä½•å¯é é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®ä¼ è¾“

ã€æ¯”å–»ï¼šä¿¡ä»¶ã€‘

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704140.jpg)

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704141.jpg)

ç½‘ç»œç¼–ç¨‹ï¼=ç½‘é¡µç¼–ç¨‹ï¼ˆwebå¼€å‘ï¼‰

B/Sæ¶æ„å’ŒC/Sæ¶æ„

# 1.2ã€ç½‘ç»œé€šä¿¡ä¸¤ä¸ªè¦ç´ 

# å¦‚ä½•å®ç°ç½‘ç»œä¸­çš„ä¸»æœºäº’ç›¸é€šä¿¡ï¼Ÿ

é€šä¿¡åŒæ–¹çš„åœ°å€ï¼š

- |P
- ç«¯å£å·

ã€æ¯”å¦‚è¯´æˆ‘ä»¬è¿™é‡Œä¸Šè¯¾ä½¿ç”¨çš„å°±æ˜¯å±€åŸŸç½‘ï¼Œä½ ä»¬è¿æ¥åˆ°æˆ‘çš„ç”µè„‘ï¼Œå°±èƒ½æŸ¥çœ‹åˆ°æˆ‘ç”µè„‘çš„ç”»é¢äº†ã€‘ä¸€å®šçš„è§„åˆ™ï¼šï¼ˆå³ï¼Œç½‘ç»œé€šä¿¡åè®®ï¼Œæœ‰ä¸¤å¥—å‚è€ƒæ¨¡å‹ï¼‰

- OSI å‚è€ƒæ¨¡å‹ï¼šæ¨¡å‹è¿‡äºç†æƒ³åŒ–ï¼Œæœªèƒ½åœ¨å› ç‰¹ç½‘ä¸Šè¿›è¡Œå¹¿æ³›æ¨å¹¿ï¼
- TCP/IP å‚è€ƒæ¨¡å‹ï¼šTCP/IPåè®®ï¼Œäº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ã€‚

<table><tr><td>OSIå‚è€ƒæ¨¡å‹</td><td>TCP/IPå‚è€ƒæ¨¡å‹</td><td>TCP/IPå‚è€ƒæ¨¡å‹å„å±‚å¯¹åº”åè®®</td></tr><tr><td>åº”ç”¨å±‚</td><td rowspan="3">åº”ç”¨å±‚</td><td rowspan="3">HTTPã€FTPã€Telnetã€DNS...</td></tr><tr><td>è¡¨ç¤ºå±‚</td></tr><tr><td>ä¼šè¯å±‚</td></tr><tr><td>ä¼ è¾“å±‚</td><td>ä¼ è¾“å±‚</td><td>TCPã€UDPã€...</td></tr><tr><td>ç½‘ç»œå±‚</td><td>ç½‘ç»œå±‚</td><td>IPã€ICMPã€ARP...</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td rowspan="2">ç‰©ç†+æ•°æ®é“¾è·¯å±‚</td><td rowspan="2">Link</td></tr><tr><td>ç‰©ç†å±‚</td></tr></table>

# æ•°æ®å°è£…

# æ•°æ®æ‹†å°

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704142.jpg)

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704143.jpg)

# å°æ€»ç»“ï¼š

1. ç½‘ç»œç¼–ç¨‹ä¸­æœ‰ä¸¤ä¸ªä¸»è¦çš„é—®é¢˜ï¼š

ã€‚å¦‚ä½•å‡†ç¡®çš„å®šä½ç½‘ç»œä¸Šä¸€å°æˆ–å¤šå°ä¸»æœºï¼›å®šä½ä¸»æœºä¸Šçš„ç‰¹å®šçš„åº”ç”¨  
æ‰¾åˆ°ä¸»æœºåå¦‚ä½•å¯é é«˜æ•ˆçš„è¿›è¡Œæ•°æ®ä¼ è¾“

2. ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸¤ä¸ªè¦ç´ ï¼š

ipå’Œç«¯å£å·  
o æä¾›ç½‘ç»œé€šä¿¡åè®®ã€‚TCP/IPå‚è€ƒæ¨¡å‹ï¼ˆåº”ç”¨å±‚ï¼Œä¼ è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œç‰©ç†+æ•°æ®é“¾è·¯å±‚ï¼‰ï¼Œ

# 1.3ã€Inet Adders

# ipåœ°å€ï¼šInet Addersss

- å”¯ä¸€çš„æ ‡è¯† internet ä¸Šçš„è®¡ç®—æœºï¼ˆé€šä¿¡å®ä½“ï¼‰
- æœ¬åœ°å›ç¯åœ°å€ (hostAddress) : 127.0.0.1 ä¸»æœºå (HostName) : localhost

- IPåœ°å€åˆ†ç±»æ–¹å¼ä¸€ï¼šIPV4 - IPV6

o IPV4: 4ä¸ªå­—èŠ‚ç»„æˆ, 4ä¸ª0~255ã€‚å¤§æ¦‚42äº¿ä¸ª, 30äº¿éƒ½åœ¨åŒ—ç¾, äºšæ´²4äº¿ã€‚2011å¹´åˆå·²ç»ç”¨å°½ã€‚ä»¥ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤º, å¦‚192.168.0.1  
o IPV6: 128ä½ (16ä¸ªå­—èŠ‚), å†™æˆ8ä¸ªæ— ç¬¦å·æ•´æ•°, æ¯ä¸ªæ•´æ•°ç”¨å››ä¸ªåå…­è¿›åˆ¶ä½è¡¨ç¤º, æ•°ä¹‹é—´ç”¨å†’å·éš”å¼€, å¦‚: 2001:0db8:3c4d:0015:
0000:0000:1a2f:1a2b

- IPåœ°å€åˆ†ç±»æ–¹å¼2ï¼šå…¬ç½‘åœ°å€ï¼ˆä¸‡ç»´ç½‘ä½¿ç”¨ï¼‰å’Œç§æœ‰åœ°å€ï¼ˆå±€åŸŸç½‘ä½¿ç”¨ï¼‰ã€‚

192.168.å¼€å¤´çš„å°±æ˜¯ç§æœ‰åœ°å€ï¼ŒèŒƒå›´å³ä¸º  $192.168.0.0 \sim 192.168.255.255$ ï¼Œä¸“é—¨ä¸ºç»„ç»‡æœºæ„å†…éƒ¨ä½¿ç”¨

- ã€æŸ¥çœ‹ JDK å¸®åŠ©æ–‡æ¡£=>InetAddressç±», ä»£è¡¨IPã€‘

- ç‰¹ç‚¹ï¼šä¸ä¾¿äºè®°å¿†ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨åŸŸåæ¥è®¿é—®ï¼šwww.baidu.com
- https://blog.kuangstudy.com/ => DNS åŸŸåè§£æï¼ˆ150.109.117.44ï¼‰ => ç°åœ¨æœ¬æœºçš„hostsæ–‡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰è¾“å…¥çš„åŸŸååœ°å€ï¼Œæ²¡æœ‰çš„è¯ï¼Œå†é€šè¿‡DNSæœåŠ¡å™¨ï¼Œæ‰¾ä¸»æœºã€‚

hostsæ–‡ä»¶åœ°å€ï¼š c:\windows\system32\drivers\etc\hosts

ä¸Šä»£ç ï¼šInsetAddressTest

```java
package com.kuangå­¦ä¸š1;   
import java.net.InetAddress;   
import java.net.UnknownHostException;   
//IPè¿™ä¸ªä¸œè¥¿ï¼Œæ€ä¹ˆç”¨Javaå¯¹è±¡è¡¨ç¤º   
public class InetAddressTest{ public static void main(String[] args){ try{ //è·å¾—IPåœ°å€ InetAddress inetAddresses1  $\equiv$  InetAddress.getName("192.168.8.123"); System.out.printlnINETAddresses1); InetAddressINETAddresses2  $=$  InetAddress.getName("www.baidu.com"); System.out.printlnINETAddresses2); //è·å–æœ¬åœ°IP InetAddressINETAddresses3  $\equiv$  InetAddress.getName("127.0.0.1"); System.out.printlnINETAddresses3); InetAddressINETAddresses4  $\equiv$  InetAddress.getName("localhost"); System.out.printlnINETAddresses4); InetAddressINETAddresses5  $\equiv$  InetAddress.getLocalHost(); System.out.printlnINETAddresses5); //getHostName System.out.printlnINETAddresses2.getHostName()); //getHostAddress System.out.printlnINETAddresses2.getHostAddress(); //Canonicalï¼šè§„èŒƒçš„ System.out.printlnINETAddresses2.getCanonicalHostName()); } catch (UnknownHostException e){ e.printStackTrace(); } }   
}
```

# 1.4ã€ç«¯å£å·

ç«¯å£å·æ ‡è¯†æ­£åœ¨è®¡ç®—æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ï¼ˆç¨‹åºï¼‰

- ä¸åŒçš„è¿›ç¨‹æœ‰ä¸åŒçš„ç«¯å£å·ï¼Œç”¨æ¥åŒºåˆ†è½¯ä»¶
- è¢«è§„å®šä¸ºä¸€ä¸ª16ä½çš„æ•´æ•°0~65535

- TCP å’Œ UDP å„æœ‰ 65535 ä¸ªç«¯å£, å•ä¸ªåè®®ä¸‹ç«¯å£ä¸èƒ½å†²çª
- ç«¯å£åˆ†ç±»ï¼š

ã€‚å…¬è®¤ç«¯å£ï¼š0~1023ã€‚è¢«é¢„å…ˆå®šä¹‰çš„æœåŠ¡é€šä¿¡å ç”¨ç«¯å£ã€‚

- HTTP é»˜è®¤ç«¯å£ï¼š80
- HTTPS é»˜è®¤ç«¯å£ï¼š443  
  FTPé»˜è®¤ç«¯å£ï¼š21  
  Telneté»˜è®¤ç«¯å£ï¼š23

æ³¨å†Œç«¯å£ï¼š1024~49151ã€åˆ†é…ç»™ç”¨æˆ·è¿›ç¨‹æˆ–åº”ç”¨ç¨‹åºã€‚

tomcaté»˜è®¤ç«¯å£ï¼š8080

- MySQL é»˜è®¤ç«¯å£ï¼š3306  
  Oracleé»˜è®¤ç«¯å£ï¼š1521

åŠ¨æ€ã€ç§æœ‰ç«¯å£ï¼š49152~65535

1 netstat -ano #æŸ¥çœ‹æ‰€æœ‰ç«¯å£  
2 netstat -ano|findstr "6732" #æŸ¥çœ‹æŒ‡å®šç«¯å£  
3 tasklist|findstr "6732" #æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹  
4 # ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨æŸ¥çœ‹PID

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704144.jpg)

æ—©å¹´ï¼ŒQQå«OICQï¼Œwindowsæœ¬æ¥ç»‘å®šçš„MSNï¼Œä½†æ˜¯å½“æ—¶ä¸­å›½æ³•å¾‹ä¹Ÿä¸å¤ªæ˜ç¡®ï¼Œå¾®è½¯é‚£è¾¹çš„äººå°±æè®®ï¼Œè¦ä¸è¦å°æ‰QQï¼Œå¯¹äºä»–ä»¬æ¥è¯´éå¸¸ç®€å•ï¼Œæ“ä½œç³»ç»Ÿå±‚é¢ï¼Œåªéœ€è¦è®©QQå®‰è£…ä¸æˆåŠŸå³å¯ã€‚ä½†æ˜¯å¾®è½¯æƒ³äº†æƒ³ï¼Œæ²¡è¿™ä¹ˆå»åšï¼Œæ¯•ç«Ÿä¸å¥½ï¼Œæ‰€ä»¥è¯´QQèƒ½èµ·æ¥ä¹Ÿæ˜¯æœ‰ä¸€å®šçš„æœºé‡çš„ï¼Œä½†æ˜¯QQèµ·æ¥ä¹‹åï¼Œæ˜ç™½äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥è¯´è…¾è®¯ç°åœ¨å¾ˆå¤šè¡Œä¸šéƒ½æ˜¯å„æ–­å¼çš„ï¼Œå¯¹ä¸å¯¹ã€‚

ç«¯å£å·ä¸IPåœ°å€çš„ç»„åˆï¼Œå¾—å‡ºä¸€ä¸ªç½‘ç»œå¥—æ¥å­—ï¼šSocketï¼Œæ‰€ä»¥è¯´ä¸€äº›ç½‘ç»œç¼–ç¨‹ä¹Ÿè¢«ç§°ä¸ºSocketç¼–ç¨‹

```java
1 package com.kuanglesson1;   
2   
3 import java.net.InetAddress;   
4   
5 public class InetAddressAddressTest {   
6 public static void main(String[] args) {   
7 InetAddress socketAddress = new   
8 InetAddress("127.0.0.1",8080);
```

```javascript
8
InetrSocketAddress
socketAddress2 = new
InetrSocketAddress("localhost", 9000);
9
System.out.println(socketAddress.getHostName());
10
System.out.println(socketAddress.getAddress());
11
System.out.println(socketAddress.getPort());
12
System.out.println(socketAddress.getPort());
13
System.out.println(socketAddress2.getHostName());
14
System.out.println(socketAddress2.getAddress(); //è¿”å›åœ°å€
15
System.out.println(socketAddress2.getPort(); //è¿”å›ç«¯å£
16
}
17
}
18
}
19
```

# 1.5ã€ç½‘ç»œé€šä¿¡åè®®

åè®®ï¼šå°±å¥½æ¯”æˆ‘ä»¬éƒ½è¯´çš„æ™®é€šè¯ï¼Œå¤§å®¶æ‰èƒ½å¬æ‡‚æˆ‘è®²çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æœ‰è‡ªå·±çš„æ–¹è¨€ï¼

# ç½‘ç»œé€šä¿¡åè®®ï¼š

è®¡ç®—æœºç½‘ç»œä¸­å®ç°é€šä¿¡å¿…é¡»æœ‰ä¸€äº›çº¦å®šï¼Œå³é€šä¿¡åè®®ï¼Œå¯¹é€Ÿç‡ï¼Œä¼ è¾“ä»£ç ï¼Œä»£ç ç»“æ„ï¼Œä¼ è¾“æ§åˆ¶æ­¥éª¤ï¼Œå‡ºé”™æ§åˆ¶ç­‰åˆ¶å®šæ ‡å‡†ã€‚

# é—®é¢˜ï¼šç½‘è·¯åè®®å¤ªå¤æ‚ï¼Ÿ

è®¡ç®—æœºç½‘ç»œé€šä¿¡æ¶‰åŠå†…å®¹å¾ˆå¤šï¼Œæ¯”å¦‚æŒ‡å®šæºåœ°å€å’Œç›®æ ‡åœ°å€ï¼ŒåŠ å¯†è§£å¯†ï¼Œå‹ç¼©è§£å‹ç¼©ï¼Œå·®é”™æ§åˆ¶ï¼Œæµé‡æ§åˆ¶ï¼Œè·¯ç”±æ§åˆ¶ï¼Œå¦‚ä½•å®ç°å¦‚æ­¤å¤æ‚çš„ç½‘ç»œåè®®å‘¢ï¼Ÿ

# é€šä¿¡åè®®åˆ†å±‚çš„æ€æƒ³

åœ¨åˆ¶å®šåè®®æ—¶ï¼ŒæŠŠå¤æ‚æˆä»½åˆ†è§£æˆä¸€äº›ç®€å•çš„æˆä»½ï¼Œå†å°†ä»–ä»¬å¤åˆèµ·æ¥ã€‚æœ€å¸¸ç”¨çš„å¤åˆæ–¹å¼æ˜¯å±‚æ¬¡æ–¹å¼ï¼Œå³åŒå±‚é—´å¯ä»¥é€šä¿¡ï¼Œä¸Šä¸€å±‚è°ƒç”¨ä¸‹ä¸€å±‚ï¼Œè€Œä¸å†ä¸‹ä¸€å±‚ä¸å‘ç”Ÿå…³ç³»ã€‚å„å±‚äº’ä¸å½±å“ï¼Œåˆ©äºç³»ç»Ÿçš„å¼€å‘å’Œæ‰©å±•ã€‚

# TCP/IPåè®®ç°‡

- ä¼ è¾“å±‚åè®®ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„åè®®ï¼š

ç”¨æˆ·ä¼ è¾“åè®® TCP (Transmission Control Protocol)  
ç”¨æˆ·æ•°æ®æŠ¥åè®® (User Datagram Protocol)

- Tcp/IP ä»¥å…¶ä¸¤ä¸ªä¸»è¦åè®®ï¼šä¼ è¾“æ§åˆ¶åè®®ï¼šTCPï¼Œå’Œç½‘ç»œäº’è”åè®®ï¼šIPï¼Œè€Œå¾—åï¼Œå®é™…ä¸Šæ˜¯ä¸€ç»„åè®®ï¼ŒåŒ…æ‹¬å¤šä¸ªå…·æœ‰ä¸åŒåŠŸèƒ½ä¸”äº’ä¸ºå…³è”çš„åè®®ã€‚
- IPï¼ˆInternet Protocolï¼‰åè®®æ˜¯ç½‘ç»œå±‚çš„ä¸»è¦åè®®ï¼Œæ”¯æŒç½‘é—´äº’è”çš„æ•°æ®é€šä¿¡ã€‚
- TCP/IPåè®®æ¨¡å‹ä»æ›´å®ç”¨çš„è§’åº¦å‡ºå‘ï¼Œå½¢æˆäº†é«˜æ•ˆçš„å››å±‚ä½“ç³»ç»“æ„ï¼Œå³ç‰©ç†é“¾è·¯å±‚ï¼ŒIPå±‚ï¼Œä¼ è¾“å±‚å’Œåº”ç”¨å±‚

# TCPå’ŒUDPå¯¹æ¯”

- TCPåè®®

â—‹ ä½¿ç”¨TCPåè®®å‰ï¼Œå¿…é¡»å»ºç«‹TCPè¿æ¥ï¼Œå½¢æˆä¼ è¾“æ•°æ®é€šé“ï¼›  
â—‹ ä¼ è¾“å‰ï¼Œé‡‡ç”¨â€˜ä¸‰æ¬¡æ¡æ‰‹â€™æ–¹å¼ï¼Œç‚¹å¯¹ç‚¹é€šä¿¡ï¼Œæ˜¯å¯é çš„ã€‚

o TCPåè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ï¼šå®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ã€‚  
åœ¨è¿æ¥ä¸­å¯è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“  
â—‹ ä¼ è¾“å®Œæ¯•ï¼Œéœ€è¦é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œæ•ˆç‡ä½  
â—‹ ä¸¾ä¾‹ï¼šæ‰“ç”µè¯

å®¢æˆ·ç«¯å‘é€synæŠ¥æ–‡ï¼Œå¹¶ç½®å‘é€åºå·ä¸ºX

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704145.jpg)  
TCPä¸‰æ¬¡æ¡æ‰‹

ä¸»åŠ¨æ–¹å‘é€Fin+AckæŠ¥æ–‡ï¼Œå¹¶ç½®å‘é€åºå·ä¸ºX

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704146.jpg)  
TCPå››æ¬¡æŒ¥æ‰‹

è¢«åŠ¨æ–¹å‘é€ACKæŠ¥æ–‡ï¼Œå¹¶ç›´å‘é€åºå·ä¸ºZï¼Œåœ¨ç¡®è®¤åºå·ä¸ºX+1

è¢«åŠ¨æ–¹å‘é€Fin+AckæŠ¥æ–‡ï¼Œå¹¶ä¸”å‘é€åºå·ä¸ºYï¼Œåœ¨ç¡®è®¤åºå·ä¸ºX

ä¸»åŠ¨æ–¹å‘é€ackæŠ¥æ–‡ï¼Œå¹¶ç›´å‘é€åºå·ä¸ºxåœ¨ç¡®è®¤åºå·ä¸ºY

4

${ACK} = Y,{seq} = X$

# UDPåè®®

å°†æ•°æ®ï¼Œæºï¼Œç›®çš„å°è£…æˆæ•°æ®åŒ…ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥  
æ¯ä¸ªæ•°æ®æŠ¥çš„å¤§å°é™åˆ¶åœ¨64Kå†…  
â—‹ å‘é€æ–¹ä¸ç®¡å¯¹æ–¹æ˜¯å¦å‡†å¤‡å¥½ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°ä¹Ÿä¸ç¡®è®¤ï¼Œæ•…äº‹ä¸å¯é çš„  
ã€‚å¯ä»¥å¹¿æ’­å‘é€  
å‘é€æ•°æ®ç»“æŸæ—¶ï¼Œæ— éœ€é‡Šæ”¾èµ„æºï¼Œå¼€é”€å°ï¼Œé€Ÿåº¦å¿«ã€‚  
â—‹ ä¸¾ä¾‹ï¼šå‘çŸ­ä¿¡ï¼Œå¯¼å¼¹ï¼ˆé¥±å’Œæ”»å‡»ï¼‰

# 2ã€TCPç½‘ç»œç¼–ç¨‹

# 2.1ã€æ¡ˆä¾‹ä¸€

éœ€æ±‚ï¼šå®¢æˆ·ç«¯å‘é€ä¿¡æ¯ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å°†æ•°æ®æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Šã€‚

```java
package com.kuanglesson2;   
import java.io IOException;   
import java.ioOutputStream;   
import java.net.InetAddress;   
import java.net.Socket;   
import java.netpptUnknownHostException;   
//å®¢æˆ·ç«¯   
public class TcpClientDemo01 { public static void main(String[] args) { Socket socket  $=$  null; OutputStream os  $=$  null; try { //1. è¿æ¥æœåŠ¡å™¨çš„åœ°å€ InetAddress serverIP  $=$  InetAddress.getName("127.0.0.1"); int port  $= 8899$  . //2. åˆ›å»ºä¸€ä¸ªSocket socket  $=$  new Socket(serverIP,port); //3. åˆ›å»ºä¸€ä¸ªè¾“å‡ºæµï¼Œå‘å¤–å†™ä¸œè¥¿ os  $=$  socket.getOutputStream(); os.write("ä½ å¥½ï¼Œæ¬¢è¿å­¦ä¹ ç‹‚ç¥è¯´Java".getBytes()); } catch (UnknownException e){ e.printStackTrace(); } catch (IOException e){ e.printStackTrace(); }finally{ //4. å…³é—­èµ„æº try{ if(os!=null){ os.close(); } if(socket!=null){ socket.close(); } } catch (IOException e){ e.printStackTrace(); } }
```

# æœåŠ¡ç«¯

```java
1 package com.kuanglesson2;   
2   
3 import javax.swing;midi.Soundbank;   
4 import java.io.BytearrayOutputStream;   
5 import java.io.IOException;   
6 import java.io.InputStreamReader;   
7 import java.net ServerSocket;   
8 import java.net.Socket;   
9 import java.util.Base64;   
10   
11 //æœåŠ¡ç«¯   
12 public class TcpServerDemo01 {   
13 public static void main(String[] args) {
```

```txt
ServerSocket serverSocket = null;   
Socket accept = null;   
InputStream is = null;   
ByteArrayOutputStream baos = null;   
try { //1. å¼€æ”¾æœåŠ¡å™¨ç«¯å£ï¼Œåˆ›å»ºServerSocket serverSocket = new ServerSocket(8899); //2. ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ accept = serverSocket.accept(); //3. è¯»å…¥å®¢æˆ·ç«¯çš„æ¶ˆæ¯, is = accept.getInputStream(); /* å›å¿†ä¹‹å‰çš„IOæµæ–¹æ¡ˆï¼Œå¼Šç«¯ï¼šå­˜åœ¨ä¸­æ–‡ï¼Œå¯èƒ½å­˜åœ¨ä¹±ç ã€‚ byte[] buffer = new byte[1024]; int len; while ((len=is.read(buffer))!= -1) { String str = new String(buffer,0,len); System.out.println(str); } */ baos = new ArrayListOutputStream(); byte[] buffer = new byte[1024]; int len; while ((len=is.read(buffer))!= -1) { baos.write(buffer,0,len); } System.out.println(baos.toString()); System.out.println("æ•°æ®æ¥æºåœ°å€ï¼š" +accept.getInetAddress().getHostName()); } catch (IOException e) { e.printStackTrace(); } finally { //4. å…³é—­èµ„æº try { if (baos!=null) { baos.close(); } if (is!=null) { is.close(); } if (accept!=null) { accept.close(); } if (serverSocket!=null) { serverSocket.close(); } } catch (Exception e) { e.printStackTrace(); } }
```

ç”Ÿæ´»ä¸¾ä¾‹ï¼šæ¸¯å£

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704147.jpg)

# 2.2ã€æ¡ˆä¾‹äºŒ

éœ€æ±‚ï¼šå®¢æˆ·ç«¯å‘é€æ–‡ä»¶ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯å°†æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ã€‚

æˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªå›¾ç‰‡ï¼Œæ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704148.jpg)

ç¼–å†™ä»£ç ï¼šå®¢æˆ·ç«¯

```java
package com.kuanglesson3;   
import java.io.File;   
import java.io.FileInputStream;   
import java.ioOutputStream;   
import java.net.InetAddress;   
import java.net.Socket;   
//å®¢æˆ·ç«¯   
public class TcpClientDemo02 { public static void main(String[] args) throws Exception{ //1.åˆ›å»ºsocketè¿æ¥ Socket socket  $=$  new Socket(InetAddress.getName("127.0.0.1")ï¼Œ 9090); //2.åˆ›å»ºä¸€ä¸ªè¾“å‡ºæµ   
OutputStream os  $=$  socket.getOutputStream(); //3.è¯»å–æ–‡ä»¶   
FileInputStream fis  $=$  new FileInputStream(new File("qinjiang.jpg")); //4.å†™å‡ºæ–‡ä»¶ byte[] buffer  $=$  new byte[1024];
```

æœåŠ¡ç«¯ï¼š

```txt
int len;
while ((len = fis.read(buffer)) != -1) {
    os.write(buffer, 0, len);
}
//5. èµ„æºå…³é—­ï¼Œåº”è¯¥ä½¿ç”¨ try-catch-finally
fis.close();
os.close();
socket.close();
}
```

```java
package com.kuanglesson3;   
import java.io.*;   
import java.net ServerSocket;   
import java.net.Socket;   
//æœåŠ¡ç«¯   
public class TcpServerDemo02 {   
public static void main(String[] args) throws Exception { //1. å¼€å¯ ServerSocket ServerSocket serverSocket = new ServerSocket(9090); //2. ä¾¦å¬ å®¢æˆ·ç«¯ Socket Socket socket = serverSocket.accept(); //3. è·å–è¾“å…¥æµ InputStream is = socket.getInputStream(); //4. è¯»å–æ¥æ”¶çš„æ–‡ä»¶å¹¶ä¿å­˜ FileOutputStream fos = new FileOutputStream(new File("receive.jpg")); byte[] buffer = new byte[1024]; int len; while ((len=is.read(buffer))!= -1){ fos.write(buffer,0,len); }   
//5.å…³é—­èµ„æºï¼Œåº”è¯¥ä½¿ç”¨ try-catch-finally fos.close(); is.close(); socket.close(); serverSocket.close();   
}
```

æµ‹è¯•ï¼šå¯åŠ¨æœåŠ¡ç«¯ï¼Œå¯åŠ¨å®¢æˆ·ç«¯ï¼Œå›¾ç‰‡æ¥æ”¶æˆåŠŸï¼

# 2.3ã€æ¡ˆä¾‹ä¸‰

éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦åœ¨æ¡ˆä¾‹äºŒçš„åŸºç¡€ä¸Šï¼Œæ¥æ”¶æˆåŠŸåï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ¥æ”¶æˆåŠŸï¼ç„¶åå®¢æˆ·ç«¯æ‰å…³é—­è¿æ¥ï¼

å®¢æˆ·ç«¯

```java
1 package com.kuanglesson4;   
2   
3 import java.io.\*;
```

æœåŠ¡ç«¯

```java
import java.net.InetAddress;   
import java.net.Socket;   
//å®¢æˆ·ç«¯   
public class TcpClientDemo03 { public static void main(String[] args) throws Exception{ //1.åˆ›å»ºsocketè¿æ¥ Socket socket  $=$  new Socket(InetAddress.getName("127.0.0.1")ï¼Œ 9090); //2.åˆ›å»ºä¸€ä¸ªè¾“å‡ºæµ OutputStream os  $=$  socket.getOutputStream(); //3.è¯»å–æ–‡ä»¶ FileInputStream fis  $=$  new FileInputStream(new File("qinjiang.jpg")); //4.å†™å‡ºæ–‡ä»¶ byte[] buffer  $=$  new byte[1024]; int len; while((len=fi.read(buffer))ï¼=-1){ os.write(buffer,0,len); }   
//å‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘ä¼ è¾“å®Œäº†ï¼Œå…³é—­æ•°æ®çš„è¾“å‡ºï¼Œä¸ç„¶å°±ä¼šä¸€ç›´é˜»å¡ï¼ socket.shutdownOutput();   
//å…ˆåˆ«ç€æ€¥å…³ï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”ï¼Œå“åº”åˆ°æ§åˆ¶å°ï¼Œæ³¨æ„é‡å¤çš„å˜é‡é—®é¢˜ï¼ InputStream inputStream  $=$  socket.getInputStream();ByteArrayOutputStream baos  $=$  new ArrayListOutputStream(); byte[]buffer2  $=$  new byte[1024]; int len2; while((len2=InputStream.read(buffer2))ï¼=-1){ baos.write(buffer2,0,len2); } System.out.println(baos.toString());   
//5.èµ„æºå…³é—­ï¼Œåº”è¯¥ä½¿ç”¨try-catch-finally baos.close(); InputStream.close(); fis.close(); os.close(); socket.close();   
}   
}
```

```java
package com.kuanglesson4;   
import java.io.File;   
import java.io.FileOutputStream;   
import java.io.InputStreamReader;   
import java.io.InputStreamReader;   
import java.net_serversocket;   
import java.net_SOCKET;   
//æœåŠ¡ç«¯   
public class TcpServerDemo03 {   
public static void main(String[] args) throws Exception { //1. å¼€å¯ ServerSocket
```

```javascript
15
ServerSocket
serverSocket = new ServerSocket(9090); //2.ä¾¦å¬å®¢æˆ·ç«¯ Socket Socket socket = serverSocket.accept(); //3.è·å–è¾“å…¥æµ InputStream is = socket.getInputStream(); //4.è¯»å–æ¥æ”¶çš„æ–‡ä»¶å¹¶ä¿å­˜ FileOutputStream fos = new FileOutputStream(new File("receive2.jpg")); byte[] buffer = new byte[1024]; int len; while ((len=is.read(buffer)) != -1){ fos.write(buffer,0,len); } //é€šçŸ¥å®¢æˆ·ç«¯æ¥æ”¶æˆåŠŸ OutputStream outputStream = socket.getOutputStream(); OutputStream.write("æ–‡ä»¶å·²ç»æˆåŠŸæ”¶åˆ°ï¼ŒOK".getBytes()); //5.å…³é—­èµ„æºï¼Œåº”è¯¥ä½¿ç”¨try-catch-finally OutputStream.close(); fos.close(); is.close(); socket.close(); serverSocket.close(); }
```

# 2.4ã€ç»ƒä¹ ä½œä¸š

1. æœåŠ¡ç«¯è¯»å–å›¾ç‰‡å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°ã€‚
2. å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€æ–‡æœ¬ï¼ŒæœåŠ¡ç«¯ä¼šå°†æ–‡æœ¬è½¬æˆå¤§å†™åœ¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

# 2.5ã€åˆè¯†TomcatæœåŠ¡å™¨

å®¢æˆ·ç«¯

è‡ªå®šä¹‰

- æµè§ˆå™¨

æœåŠ¡ç«¯

è‡ªå®šä¹‰

- TomcatæœåŠ¡å™¨

1. å°†æä¾›çš„tomcatè§£å‹
2. è¿è¡Œbinç›®å½•ä¸‹çš„å¯åŠ¨æ–‡ä»¶
3. æµ‹è¯•è®¿é—®localhost:8080

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704149.jpg)

4. ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨é‡Œé¢çš„ \webapps\ROOT ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªkuangshen.txtï¼Œç¼–è¾‘æ–‡ä»¶ä¿å­˜ï¼

1 ç½‘ç»œå¦‚æ­¤ç¥å¥‡ï¼Œè®©ä½ æˆ‘ç›¸é‡

5. æµè§ˆå™¨è¾“å…¥ http://localhost:8080/kuangshen.txtï¼Œå‘ç°å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬å®¢æˆ·ç«¯çš„èµ„æºï¼ŒOK
6. è¿™é‡Œï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè€ŒTomcat æœåŠ¡å™¨ï¼Œå°±ç›¸å½“äºæ˜¯æœåŠ¡ç«¯ï¼Œå…·ä½“çš„å…³äºTomcatçš„å­¦ä¹ æˆ‘ä»¬è¦åˆ°JavaWebé˜¶æ®µä¼šå…·ä½“å­¦ä¹ 

# 3ã€UDPç½‘ç»œç¼–ç¨‹

# 3.1ã€è¯´æ˜

- DatagramSocket å’Œ DatagramPacket ä¸¤ä¸ªç±»å®ç°äº†åŸºäºUDPåè®®çš„ç½‘ç»œç¨‹åºã€‚
- UDPæ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥å­—DatagramSocketå‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯UDPæ•°æ®æŠ¥ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚
- DatagramPacket å¯¹è±¡å°è£…äº†UDPæ•°æ®æŠ¥ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº†å‘é€ç«¯çš„IPåœ°å€å’Œç«¯å£å·ä»¥åŠæ¥æ”¶ç«¯çš„IPåœ°å€å’Œç«¯å£å·ã€‚
- UDPåè®®ä¸­æ¯ä¸ªæ•°æ®æŠ¥éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— éœ€å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥ã€‚å¦‚åŒå‘å¿«é€’åŒ…è£¹ä¸€æ ·ã€‚

# 3.2ã€æ¡ˆä¾‹ä¸€

# å‘é€æ–¹

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251128234704150.jpg)

æ¥æ”¶æ–¹

```txt
11 DatagramSocket socket = new DatagramSocket();   
12   
13 //2.å°è£…æ•°æ®åŒ… String msg = "UDPSender  $= = >$  "ï¼› byte[] data = msg.getBytes(); InetAddress inet = InetAddress.getName("127.0.0.1"); int port = 9090; DatagramPacket packet = new DatagramPacket(data,0,data.length,inet,port);   
19   
20 //3.é€šè¿‡Socketå‘é€packet socket.send(batch);   
21   
22   
23 //4.å…³é—­socket socket.close();   
24   
25 }   
26 }
```

```java
package com.kuanglesson5;   
import java.net.DatagramPacket;   
import java.net.DatagramSocket;   
public class UDPReceiverDemo01 { public static void main(String[] args) throws Exception { //1. å»ºç«‹DatagramSocket,å¼€æ”¾ç«¯å£ DatagramSocket socket = new DatagramSocket(9090); //2. æ¥æ”¶æ•°æ® byte[] buffer = new byte[1024]; DatagramPacket packet = new DatagramPacket(buffer,0,buffer.length); socket.receive(socket); //3. è¾“å‡ºæ•°æ® //packetçš„æ•°æ®()ï¼šè·å–packetä¸­çš„æ•°æ® System.out.println(new Stringpacketçš„æ•°æ®(),0, packet-Length());   
//4. å…³é—­socket socket.close();   
}   
}
```

æµ‹è¯•ï¼šå¯åŠ¨æ¥æ”¶æ–¹ï¼Œå¯åŠ¨å‘é€æ–¹ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ¥æ”¶åˆ°ï¼

# 3.3ã€æ¡ˆä¾‹äºŒï¼šåœ¨çº¿å’¨è¯¢

å®¢æˆ·ç«¯

```java
1 package com.kuang.udchat;   
2   
3 import java.ioé¡ºå¾·Reader;   
4 import java.io.InputStreamReaderReader;
```

```java
import java.net.DatagramPacket;   
import java.net.DatagramSocket;   
import java.net.InetAddress;   
public class udpTalkClient { public static void main(String[] args) throws Exception { System.out.println("å‘é€æ–¹å¯åŠ¨ä¸­...."); //1.ä½¿ç”¨DatagramSocketæŒ‡å®šç«¯å£ï¼Œåˆ›å»ºå‘é€ç«¯ Datagramsocket socket  $=$  new DatagramSocket(8888); //2.å‡†å¤‡æ•°æ®ï¼Œè½¬æˆå­—èŠ‚æ•°ç»„ BufferedReader reader  $=$  new BufferedReader(new InputStreamReader(System.in)); while(true){ String data  $=$  reader.readLine(); byte[] datas  $=$  data.getBytes(); //3.å°è£…æˆDatagramPacketåŒ…è£¹ï¼Œéœ€è¦æŒ‡å®šç›®çš„åœ° DatagramPacket packet  $=$  new DatagramPacket(datas,0,datas.length, new InetAddress("localhost",6666)); //4.å‘é€åŒ…è£¹send socket.send(batch); //é€€å‡ºåˆ¤æ–­ if(data.equals("bye")){ break; } } 33   
//5.é‡Šæ”¾èµ„æº socket.close();   
}
```

# æœåŠ¡ç«¯

```java
1 package com.kuang.udpchat;   
2   
3 import java.net.DatagramPacket;   
4 import java.net.DatagramSocket;   
5   
6 public class UdpTalkServer {   
7 public static void main(String[] args) throws Exception {   
8 DatagramSocket socket  $=$  new DatagramSocket(6666);   
9 while (true) {   
10 try { //å‡†å¤‡æ¥æ”¶åŒ…è£¹ï¼›   
12 byte[] container  $=$  new byte[1024];   
13 DatagramPacket packet  $=$  new DatagramPacket/container,0, container.length);   
14 socket.receivepacket); //é˜»å¡å¼æ¥æ”¶åŒ…è£¹   
15   
16 byte[] datas  $=$  packetçš„æ•°æ®();   
17 int len  $=$  packet-Length();   
18 String data  $=$  new String(datas,0,len);   
19 System.out.println(data);
```

å‘é€ç«¯å¤šçº¿ç¨‹

```javascript
//é€€å‡ºåˆ¤æ–­  
if (data.equals("bye")) {
    break;
}
}catch
(Exception
e
)
{
    e.printStackTrace();
}
}
socket.close();
}
```

é—®é¢˜ï¼šç°åœ¨éœ€è¦ä¸¤ééœ€è¦æ¥å—å’Œå‘é€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹æ¥è§£å†³ï¼

```java
package com.kuang.udchat;   
import java.ioé¡ºå¾·reader;   
import java.io.InputStreamReaderReader;   
import java.net.DatagramPacket;   
import java.net.DatagramSocket;   
import java.net.InetSocketAddress;   
import java.net.SocketException;   
//å‘é€ç«¯   
public class TalkSend implements Runnable { private DatagramSocket socket; private BufferedReader reader; private String toIP; private int toPort; public TalkSend(int port,String toIP,int toPort) { this.toIP  $\equiv$  toIP; this.toPort  $\equiv$  toPort; try { socket  $=$  new DatagramSocket.port); reader  $=$  new BufferedReader(new InputStreamReader(System.in)); } catch (SocketException e){ e.printStackTrace(); 1   
}   
@override   
public void run() { while(true){ try{ String data  $\equiv$  reader.readLine(); byte[] datas  $\equiv$  data.getBytes(); //3.å°è£…æˆDatagramPacketåŒ…è£¹ï¼Œéœ€è¦æŒ‡å®šç›®çš„åœ° DatagramPacket packet  $\equiv$  new DatagramPacket(datas,0,datas.length, new InetSocketAddress(this.toIP,this.toPort));   
//4.å‘é€åŒ…è£¹send socket.sendpacket);
```

æ¥æ”¶ç«¯å¤šçº¿ç¨‹

```javascript
//é€€å‡ºåˆ¤æ–­  
if (data.equals("bye")) {
    break;
}
}catch
(Exception
e
)
{
    e.printStackTrace();
}
}
//5. é‡Šæ”¾èµ„æº  
socket.close();
}
```

```java
package com.kuang.udpchat;   
import java.net.DatagramPacket;   
import java.net.DatagramSocket;   
import java.net.SocketException;   
//æ¥æ”¶ç«¯   
public class TalkReceive implements Runnable { private DatagramSocket socket; private String msgFrom; public TalkReceive(int port,String msgFrom) { this.msgFrom  $=$  msgFrom; try{ socket  $=$  new DatagramSocket.port); } catch (SocketException e){ e.printStackTrace(); 1 @override public void run() { while(trueï¼‰{ try{ //å‡†å¤‡æ¥æ”¶åŒ…è£¹ï¼š byte[] container  $=$  new byte[1024]; DatagramPacket packet  $=$  new DatagramPacket/container,0, container.length); socket.receivepacket); //é˜»å¡å¼æ¥æ”¶åŒ…è£¹ byte[] datas  $=$  packet.getData(); int len  $=$  packet-Length(); String data  $=$  new String(datas,0,len); System.out.println(msgFrom+:" +data); //é€€å‡ºåˆ¤æ–­ if(data.equals("bye")){ break; } catch(Exception e){ e.printStackTrace();
```

å­¦ç”Ÿç«¯

```txt
42 }   
43 socket.close();   
44 }   
45   
46 }
```

è€å¸ˆç«¯

```java
package com.kuang.udchat;   
public class TalkStudent { public static void main(String[] args){ new Thread(new TalkSend(7777, "localhost", 9999)).start(); new Thread(new TalkReceive(8888, "è€å¸ˆ").start(); }   
}
```

å®ä¾‹åŒ–

```java
1 package com.kuang.udchat;   
2   
3 public class TalkTeacher { public static void main(String[] args) { new Thread(new TalkReceive(9999, "å­¦ç”Ÿ").start(); new Thread(new TalkSend(5555, "localhost", 8888)).start(); }   
4   
5   
6   
7   
8
```

# 4ã€URLç¼–ç¨‹

# 4.1ã€urlç±»

- URL (Uniform Resource Locator)ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå®ƒè¡¨ç¤ºinternetä¸ŠæŸä¸€èµ„æºçš„åœ°å€ã€‚
- å®ƒæ˜¯ä¸€ç§å…·ä½“çš„URIï¼Œå³URLå¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½•locateï¼šå®šä½è¿™ä¸ªèµ„æºã€‚
- é€šè¿‡URLæˆ‘ä»¬å¯ä»¥è®¿é—®Internetä¸Šçš„å„ç§ç½‘ç»œèµ„æºï¼Œæ¯”å¦‚æœ€å¸¸è§çš„www,ftpç«™ç‚¹ã€‚æµè§ˆå™¨é€šè¿‡è§£æç»™å®šçš„URLå¯ä»¥åœ¨ç½‘ç»œä¸ŠæŸ¥æ‰¾ç›¸åº”çš„æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚
- URL çš„åŸºæœ¬ç»“æ„ç”± 5 éƒ¨åˆ†ç»„æˆ:

1 ä¼ è¾“åè®®ï¼š//ä¸»æœºåï¼šç«¯å£å·/æ–‡ä»¶å #ç‰‡æ®µåï¼Ÿå‚æ•°åˆ—è¡¨

ä¾‹å¦‚ï¼šhttp://localhost:8080/helloworld/index.jsp#a?username=kuangshen&password=123  
ã€‚ç‰‡æ®µåï¼Œå³é”šé“¾æ¥ï¼Œæ¯”å¦‚æˆ‘ä»¬å»ä¸€äº›å°è¯´ç½‘ç«™ï¼Œå¯ä»¥ç›´æ¥å®šä½åˆ°æŸä¸ªç« èŠ‚ä½ç½®  
å‚æ•°åˆ—è¡¨æ ¼å¼ï¼šå‚æ•°å=å‚æ•°å€¼&å‚æ•°å=å‚æ•°å€¼...

1 package com.kuanglesson6;

```java
import java.net.MalformedURLException;   
import java.net(URL;   
public class URLDemo01 { public static void main(String[] args) { try { URL url  $=$  newURL("http://localhost:8080/helloworld/index.jsp? username  $\equiv$  kuangshen&password  $\equiv$  123"); System.out.println(url.getProtocol()); //è·å–URLçš„åè®®å System.out.println(url.getHost()); //è·å–URLçš„ä¸»æœºå System.out.println(url.getPort()); //è·å–URLçš„ç«¯å£å· System.out.println(url.getPath()); //è·å–URLçš„æ–‡ä»¶è·¯å¾„ System.out.println(url.getFile()); //è·å–URLçš„æ–‡ä»¶å System.out.println(url.getQuery()); //è·å–URLçš„æŸ¥è¯¢å } catch (MalformedURLException e){ e.printStackTrace(); } } }
```

# 4.2ã€ä¸‹è½½tomcatä¸‹çš„æ–‡ä»¶

é¦–å…ˆéœ€è¦åœ¨tomcatä¸­æ”¾å…¥ä¸€ä¸ªèµ„æºæ–‡ä»¶ï¼

```java
package com.kuanglesson6;   
import java.io.FileOutputStream;   
import java.io.InputStreamReader;   
import java.net.HttpUrlConnection;   
import java.net(URL;   
public class URLDemo02 { public static void main(String[] args) { try { //1. å®šä½åˆ°æœåŠ¡å™¨ç«¯çš„èµ„æº URL url = new URL("http://localhost:8080/helloworld/qinjiang.jpg"); //2. åˆ›å»ºè¿æ¥ HttpURLConnection connection = (HttpURLConnection) url.openConnection(); //3. è·å–è¾“å…¥æµ InputStream is = connection.getInputStream(); //4. å†™å‡ºæ–‡ä»¶ FileOutputStream fos = new FileInputStream("qinjiang2.jpg"); byte[] buffer = new byte[1024]; int len; while ((len=is.read(buffer)) != -1) { fos.write(buffer,0,len); }   
//å…³é—­èµ„æº
```

```txt
27 fos.close();   
28 is.close();   
29 connectiondisconnect(); //æ–­å¼€è¿æ¥   
30   
31 } catch (Exception e) {   
32 e.printStackTrace();   
33 }   
34 }   
35 }
```