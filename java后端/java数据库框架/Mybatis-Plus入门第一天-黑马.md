# Mybatis-Plus:hatching_chick::hatching_chick::hatching_chick:

::: tip ğŸ£ğŸ£ğŸ£

- **Mybatis-Plusæ¡†æ¶æ¥å•¦ï¼ï¼ï¼**<br><br>
  æœ¬èŠ‚ä¸»è¦è®²äº†æˆ‘ä»¬å¼€å‘webé¡¹ç›®æœ€æµè¡Œçš„æ“ä½œæ•°æ®åº“çš„æ¡†æ¶MyBatisçš„è¿›é˜¶ç‰ˆ~Plus <br>
  æˆ‘ä»¬çš„æ•°æ®åº“æ“ä½œé©±åŠ¨ï¼ˆæ¡†æ¶ï¼‰çš„æ¼”å˜æ˜¯è¿™æ ·çš„ï¼š<br>
  <h3>jdbc->MyBatis-><em style="color: red;">MyBatis-Plus</em>-></h3>
  å­¦è¿™èŠ‚çš„æ—¶å€™æˆ‘åº”è¯¥ä¹Ÿæ˜¯å¤§ä¸‰å•¦ï¼
  å­¦äº†è¿™èŠ‚ï¼ŒMyBatiså°±è¿›é˜¶å•¦ï¼<br/>
  å¥½å°±å¥½åœ¨ç®€å•çš„å¢åˆ æ”¹æŸ¥å…¨ç»™å°è£…å¥½äº†ï¼Œç›´æ¥ç”¨ï¼<br/>
  <br/>
- **çœ‹å®Œæœ¬èŠ‚å¯ä»¥åˆ©ç”¨MyBatis-Plusæ¡†æ¶å¿«é€Ÿé…ç½®ï¼Œæ›´ç®€å•åœ°æ“ä½œæ•°æ®åº“ï¼<br/>** <br/>
- **<p style="color:red">å†²å†²å†²~</p>

# è¯¾ç¨‹ä»‹ç»

- äº†è§£Mybatis-Plus  
  æ•´åˆMybatis-Plus
- é€šç”¨CRUD
- Mybatis-Plusçš„é…ç½®
- æ¡ä»¶æ„é€ å™¨

# 1ã€äº†è§£Mybatis-Plus

# 1.1ã€Mybatis-Plusä»‹ç»

MyBatis-Plusï¼ˆç®€ç§°MPï¼‰æ˜¯ä¸€ä¸ªMyBatisçš„å¢å¼ºå·¥å…·ï¼Œåœ¨MyBatisçš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚

å®˜ç½‘ï¼šhttps://mybatis-plus/æˆ–https://mp.baomidou.com/

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547169.jpg)  
MyBatis-Plus

ä¸ºç®€åŒ–å¼€å‘è€Œç”Ÿ

å¿«é€Ÿå¼€å§‹  $\rightarrow$

# æ¶¦ç‰©æ— å£°

åªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘ã€‚

# æ•ˆç‡è‡³ä¸Š

åªéœ€ç®€å•é…ç½®ï¼Œå³å¯å¿«é€Ÿè¿›è¡ŒCRUDæ“ä½œï¼Œä»è€ŒèŠ‚çœå¤§é‡æ—¶é—´ã€‚

# ä¸°å¯ŒåŠŸèƒ½

çƒ­åŠ è½½ã€ä»£ç ç”Ÿæˆã€åˆ†é¡µã€æ€§èƒ½åˆ†æç­‰åŠŸèƒ½ä¸€åº”ä¿±å…¨ã€‚

# æ„¿æ™¯

æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯æˆä¸º MyBatis æœ€å¥½çš„æ­æ¡£ï¼Œå°±åƒ é­‚æ–—ç½— ä¸­çš„ 1Pã€2Pï¼ŒåŸºå‹æ­é…ï¼Œæ•ˆç‡ç¿»å€ã€‚

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547170.jpg)  
JUST

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547171.jpg)  
LIKE

# TO BE THE BEST PARTNER OF MYBATIS

# 1.2ã€ä»£ç ä»¥åŠæ–‡æ¡£

æ–‡æ¡£åœ°å€ï¼šhttps://mybatis-plus/guide/

æºç åœ°å€ï¼šhttps://github.com/baomidou/mybatis-plus

# 1.3ã€ç‰¹æ€§

- æ— ä¾µå…¥ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘
- æŸè€—å°ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ
- å¼ºå¤§çš„CRUDæ“ä½œï¼šå†…ç½®é€šç”¨Mapperã€é€šç”¨Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ†CRUDæ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚
- æ”¯æŒ Lambda å½¢å¼è°ƒç”¨ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™
- æ”¯æŒå¤šç§æ•°æ®åº“ï¼šæ”¯æŒMySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer2005ã€SQLServerç­‰å¤šç§æ•°æ®åº“
- æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆï¼šæ”¯æŒå¤šè¾¾4ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€IDç”Ÿæˆå™¨-Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜
- æ”¯æŒ XML çƒ­åŠ è½½ï¼šMapper å¯¹åº”çš„ XML æ”¯æŒçƒ­åŠ è½½ï¼Œå¯¹äºç®€å•çš„ CRUD æ“ä½œï¼Œç”šè‡³å¯ä»¥æ—  XML å¯åŠ¨
- æ”¯æŒ ActiveRecord æ¨¡å¼ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ
- æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆWrite once, use anywhereï¼‰
- æ”¯æŒå…³é”®è¯è‡ªåŠ¨è½¬ä¹‰ï¼šæ”¯æŒæ•°æ®åº“å…³é”®è¯ï¼ˆorderã€keyâ€¦â€¦ï¼‰è‡ªåŠ¨è½¬ä¹‰ï¼Œè¿˜å¯è‡ªå®šä¹‰å…³é”®è¯
- å†…ç½®ä»£ç ç”Ÿæˆå™¨ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapperã€Modelã€Serviceã€Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨
- å†…ç½®åˆ†é¡µæ’ä»¶ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢
- å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶ï¼šå¯è¾“å‡ºSqlè¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢
- å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶ï¼šæä¾›å…¨è¡¨ deleteã€update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ
- å†…ç½®Sqlæ³¨å…¥å‰¥ç¦»å™¨ï¼šæ”¯æŒSqlæ³¨å…¥å‰¥ç¦»ï¼Œæœ‰æ•ˆé¢„é˜²Sqlæ³¨å…¥æ”»å‡»

# 1.4ã€æ¶æ„

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547172.jpg)

# 1.5ã€ä½œè€…

Mybatis-Plusæ˜¯ç”±baomidouï¼ˆè‹ç±³è±†ï¼‰ç»„ç»‡å¼€å‘å¹¶ä¸”å¼€æºçš„ï¼Œç›®å‰è¯¥ç»„ç»‡å¤§æ¦‚æœ‰30äººå·¦å³ã€‚

ç äº‘åœ°å€ï¼šhttps://gitee.com/organizations/baomidou

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547173.jpg)

# 2ã€å¿«é€Ÿå¼€å§‹

å¯¹äºMybatisæ•´åˆMPæœ‰å¸¸å¸¸æœ‰ä¸‰ç§ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯Mybatis+MPã€Spring+Mybatis+MPã€Spring Boot+Mybatis+MPã€‚

# 2.1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547174.jpg)

# -- åˆ›å»ºæµ‹è¯•è¡¨

```sql
CREATE TABLE `tb_user` (  
    `id` `bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',  
    `user_name` varchar(20) NOT NULL COMMENT 'ç”¨æˆ·å',  
    `password` varchar(20) NOT NULL COMMENT 'å¯†ç ',  
    `name` varchar(30) DEFAULT NULL COMMENT 'å§“å',  
    `age` int(11) DEFAULT NULL COMMENT 'å¹´é¾„',  
    `email` varchar(50) DEFAULT NULL COMMENT 'é‚®ç®±',  
PRIMARY KEY ('id')  
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT charset=utf8;
```

# -- æ’å…¥æµ‹è¯•æ•°æ®

```sql
INSERT INTO tb_user ('id', 'user_name', 'password', 'name', 'age', 'email') VALUES ('1', 'zhangsan', '123456', 'å¼ ä¸‰', '18', 'test1@itcast.cn');  
INSERT INTO tb_user ('id', 'user_name', 'password', 'name', 'age', 'email') VALUES ('2', 'lisi', '123456', 'æå››', '20', 'test2@itcast.cn');  
INSERT INTO tb_user ('id', 'user_name', 'password', 'name', 'age', 'email') VALUES ('3', 'wangwu', '123456', 'ç‹äº”', '28', 'test3@itcast.cn');  
INSERT INTO tb_user ('id', 'user_name', 'password', 'name', 'age', 'email') VALUES ('4', 'zhaoliu', '123456', 'èµµå…­', '21', 'test4@itcast.cn');  
INSERT INTO tb_user ('id', 'user_name', 'password', 'name', 'age', 'email') VALUES ('5', 'sunqi', '123456', 'å­™ä¸ƒ', '24', 'test5@itcast.cn');
```

# 2.2ã€åˆ›å»ºå·¥ç¨‹

# IJ

# New Project

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547175.jpg)

GroupId cn.itcast.mp

Inherit

ArtifactId | itcast-mybatis-plus

Inherit

Version 1.0-SNAPSHOTOT

Previous

Next

Cancel

Help

# å¯¼å…¥ä¾èµ–ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
		\xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 $xsi:\$  {schemaLocation} = "http://maven.apache.org/POM/4.0.0)$
http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelversion>4.0.0</modelversion>
    <groupId>cn.itcast.mp</groupId>
    <artifactId>itcast-mybatis-plus</artifactId>
    <version>1.0-SNAPSHOT</version>
    <modules>
        <module>itcast-mybatis-plus-simple</module>
    </modules>
    <packaging>pom</packaging>
    <dependencies>
        <!-- mybatis-plusæ’ä»¶ä¾èµ– -->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus</artifactId>
            <version>3.1.1</version>
        </dependency>
    <!-- MySql -->
```

```xml
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.47</version>
</dependency>
<!-- è¿æ¥æ±  -->
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>druid</artifactId>
    <version>1.0.11</version>
</dependency>
<!-- ç®€åŒ–beanä»£ç çš„å·¥å…·åŒ… -->
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <optional>true</optional>
    <version>1.18.4</version>
</dependency>
<dependency>
    <groupId>jenit</groupId>
    <artifactId>jenit</artifactId>
    <version>4.12</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.4</version>
</dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven/plugins</groupId>
            <artifactId>maven-plugin-plugin</artifactId>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>
</build>
```

# 2.3ã€Mybatis + MP

ä¸‹é¢æ¼”ç¤ºï¼Œé€šè¿‡çº¯Mybatisä¸Mybatis-Plusæ•´åˆã€‚

# 2.3.1ã€åˆ›å»ºå­Module

```txt
1 <?xml version="1.0" encoding="UTF-8"?>
2 <project xmlns="http://maven.apache.org/POM/4.0.0"
```

log4j.properties :

```xml
3 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
4 xsi: schemaLocation="http://maven.apache.org/POM/4.0.0"  
http://maven.apache.org/xsd/maven-4.0.0.xsd">  
5 <parent> <artifactId>itcast-mybatis-plus</artifactId> <groupId>cn.itcast.mp</groupId> <version>1.0-SNAPSHOT</version> </parent> <modelversion>4.0.0</modelversion> <packaging>jar</packaging> <artifactId>itcast-mybatis-plus-simple</artifactId> </project>
```

```batch
1 log4j.rootLogger  $\equiv$  DEBUG,A1   
2   
3 log4j.append.A1  $\equiv$  org.apache.log4j(ConsoleAppender   
4 log4j.append.A1.layout  $\equiv$  org.apache.log4j.PatternLayout   
5 log4j.append.A1.layout.ConversionPattern  $= [\% t][\% c] - [\% p]$  %m%n
```

# 2.3.2ã€Mybatiså®ç°æŸ¥è¯¢User

ç¬¬ä¸€æ­¥ï¼Œç¼–å†™mybatis-config.xmlæ–‡ä»¶ï¼š  
ç¬¬äºŒæ­¥ï¼Œç¼–å†™Userå®ä½“å¯¹è±¡ï¼šï¼ˆè¿™é‡Œä½¿ç”¨lombokè¿›è¡Œäº†è¿›åŒ–beanæ“ä½œï¼‰

```xml
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE configuration  
PUBLIC "/~/mybatis.org//DTD Config 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-config.dtd">  
<configuration>  
<environments default="development">  
<environment id="development">  
<transactionManager type="JDBC"/>  
<dataSource type="POOLED">  
<property name="driver" value="com.mysql.jdbc.Driver"/>  
<property name="url" value="jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncodingutf8&amp;autoReconnect=true&amp;allowMultiQuerie s=true&amp;useSSL=false"/>  
<property name="username" value="root"/>  
<property name="password" value="root"/>  
</dataSource>  
</environment>  
</environments>  
<mappers>  
<mapper resource="UserMapper.xml"/>  
</mappers>  
</configuration>
```

```txt
1 package cn.itcast.mp/simple.pojo;   
2   
3 import lombok.AllArgsConstructor;   
4 import lombok.Data;   
5 import lombok.NoArgsConstructor;   
6   
7 @Data   
8 @NoArgsConstructor   
9 @AllArgsConstructor   
10 public class User {   
11   
12 private Long id;   
13 private String userName;   
14 private String password;   
15 private String name;   
16 private Integer age;   
17 private String email;   
18 }   
19
```

# ç¬¬ä¸‰æ­¥ï¼Œç¼–å†™UserMapperæ¥å£ï¼š

```java
1 package cn.itcast.mp/simple mapper;   
2   
3 import cn.itcast.mp.simple.pojo.User;   
4   
5 import java.util.List;   
6   
7 public interface UserMapper {   
8 List<>findAll();   
9   
10   
11 }   
12
```

# ç¬¬å››æ­¥ï¼Œç¼–å†™UserMapper.xmlæ–‡ä»¶ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="cn.itcast.mp.simple.mapper.UserMapper">  
<select id="findAll" resultType="cn.itcast.mp/simple.pojo.User">  
select * from tb_user  
</select>  
</mapper>
```

# ç¬¬äº”æ­¥ï¼Œç¼–å†™TestMybatisæµ‹è¯•ç”¨ä¾‹ï¼š

æµ‹è¯•ç»“æœï¼š

```java
package cn.itcast.mp/simple;   
import cn.itcast.mp.simple.mapping.UserMapper;   
import cn.itcast.mp.simple.pojo.User;   
import org.apache. ibatis.i0. Resources;   
import org.apache. ibatis. session. SqSession;   
import org.apache. ibatis. session. SqSessionFactory;   
import org.apache. ibatis. session. SqSessionFactoryBuilder;   
import org. junit.Test;   
import java.io. InputStream;   
import java.util.List;   
public class TestMybatis { @Test public void testUserList(ï¼‰throws Exception{ String resource  $=$  "mybatis-config.xml"; InputStream inputStream  $\equiv$  Resources.getResourceAsStream(resource);åœ¨çº¿å’¨è¯¢Factory sqSessionFactory  $\equiv$  newåœ¨çº¿å’¨è¯¢FactoryBuilder(ï¼‰.build(inputStream); sqSession sqSession  $\equiv$  sqSessionFactory.openSession(); ç”¨æˆ·Mapper userMapper  $\equiv$  sqSession.getMapper(UserMapper.class); List<User> list  $\equiv$  userMapper.findAll(); for (User user : list){ System.out.println(user); } 1
```

```txt
1 [main] [cn.itcast.mp.simple mapper.UserMapper.findAll]-[DEBUG]  $\equiv \equiv$  Parameters:   
2 [main] [cn.itcast.mp.simple mapper.UserMapper.findAll]-[DEBUG]  $<   =   =$  Total:5   
3 User(id=1ï¼ŒuserName  $\equiv$  nullï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  å¼ ä¸‰ï¼Œage  $\coloneqq$  18ï¼Œemail  $\equiv$  test1@itcast.cn)   
4 User(id=2ï¼ŒuserName  $\equiv$  nullï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  æå››ï¼Œage  $\coloneqq$  20ï¼Œemail  $\equiv$  test2@itcast.cn)   
5 User(id=3ï¼ŒuserName  $\equiv$  nullï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  ç‹äº”ï¼Œage  $\coloneqq$  28ï¼Œemail  $\equiv$  test3@itcast.cn)   
6 User(id=4ï¼ŒuserName  $\equiv$  nullï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  èµµå…­ï¼Œage  $\coloneqq$  21ï¼Œemail  $\equiv$  test4@itcast.cn)   
7 User(id=5ï¼ŒuserName  $\equiv$  nullï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  å­™ä¸ƒï¼Œage  $\coloneqq$  24ï¼Œemail  $\equiv$  test5@itcast.cn)
```

# 2.3.3ã€Mybatis+MPå®ç°æŸ¥è¯¢User

ç¬¬ä¸€æ­¥ï¼Œå°†UserMapperç»§æ‰¿BaseMapperï¼Œå°†æ‹¥æœ‰äº†BaseMapperä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼š

```java
1 package cn.itcast.mp.simple mapper;   
2   
3 import cn.itcast.mp.simple.pojo.User;   
4 import com.baomidou.mybatisplus.core.mapper.BaseMapper;   
5   
6 import java.util.List;   
7   
8 public interface UserMapper extends BaseMapper{   
9 List<>findAll();   
10   
11   
12 }
```

ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨MPä¸­çš„MybatisSqlSessionFactoryBuilderè¿›ç¨‹æ„å»ºï¼š

```java
package cn.itcast.mp.simple;   
import cn.itcast.mp/simple)mapper.UserMapper;   
import cn.itcast.mp.simple.pojo.User;   
import com.baomidou.mybatisplus.core.MybatisSqlSessionFactoryBuilder;   
import org.apache. ibatis.io. Resources;   
import org.apache. ibatis.session.SqlSession;   
import org.apache. ibatis.session.SqlSessionFactory;   
import org.apache. ibatis.session.SqlSessionFactoryBuilder;   
import org. junit.Test;   
import java.io. InputStream;   
import java.util.List;   
public class TestMybatisPlus { @Test public void testUserList() throws Exception{ String resource \(=\) "mybatis-config.xml"; InputStream inputStream \(=\) Resources.getResourceAsStream(resource); //è¿™é‡Œä½¿ç”¨çš„æ˜¯MPä¸­çš„MybatisSqlSessionFactoryBuilder SQLSessionFactory sqlSessionFactory \(\equiv\) new MybatisSqlSessionFactoryBuilder().build(inputStream); \\(sqlSession sqlSession \)\equiv\( sqlSessionFactory.openSession(); UserMapper userMapper \(=\) sqlSession.getMapper(UserMapper.class); //å¯ä»¥è°ƒç”¨BaseMapperä¸­å®šä¹‰çš„æ–¹æ³• List<User> list \(=\) userMapper.selectList(null); for (User user : list){ System.out.println(user); }
```

# è¿è¡ŒæŠ¥é”™ï¼š

```txt
ltParameterMap   
tting parameters   
password,name,age,emai FROM user   
tions.jdbc4.MySQLSyntaxErrorException:Table 'mp.user' doesn't exist   
ions.ExceptionFactory unwrapException(ExceptionFactory.java:30)   
n.default.DefaultSqlSession.selectList(DefaultSqlSession.java:150)   
n.default.DefaultSqlSession.selectList(DefaultSqlSession.java:141)   
.core.override.MybatisMapperMethod.ExecuteForMany(MybatisMapperMethod.java:168)   
core.override.MybatisMapperMethod.Execute(MybatisMapperMethod.java:82)   
core_override_MybatisMapperProxy.invoke(MybatisMapperProxy.java:61)<1 internal call>
```

è§£å†³ï¼šåœ¨Userå¯¹è±¡ä¸­æ·»åŠ @TableNameï¼ŒæŒ‡å®šæ•°æ®åº“è¡¨å

```java
@Data @NoArgsConstructor @AllArgsConstructor @TableName("tb_user") public class User { private Long id; private String userName; private String password; private String name; private Integer age; private String email; }
```

# æµ‹è¯•ï¼š

```txt
1 [main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] => Preparing: SELECT id, user_name, password, name, age, email FROM tb_user  
2 [main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] => Parameters:  
3 [main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] <= Total: 5  
4 User(id=1, userName=zhangsan, password=123456, name=å¼ ä¸‰, age=18, email=test1@itcast.cn)  
5 User(id=2, userName=lisi, password=123456, name=æå››, age=20, email=test2@itcast.cn)  
6 User(id=3, userName=wangwu, password=123456, name=ç‹äº”, age=28, email=test3@itcast.cn)  
7 User(id=4, userName=zhaoliu, password=123456, name=èµµå…­, age=21, email=test4@itcast.cn)  
8 User(id=5, userName=sunqi, password=123456, name=å­™ä¸ƒ, age=24, email=test5@itcast.cn)
```

# ç®€å•è¯´æ˜ï¼š

- ç”±äºä½¿ç”¨äº†Mybatis.SqlSessionFactoryBuilderè¿›è¡Œäº†æ„å»ºï¼Œç»§æ‰¿çš„BaseMapperä¸­çš„æ–¹æ³•å°±è½½å…¥åˆ°äº†SqlSessionä¸­ï¼Œæ‰€ä»¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç›¸å…³çš„æ–¹æ³•ï¼›

# å¦‚å›¾ï¼š

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547176.jpg)

# 2.4ã€Spring + Mybatis + MP

å¼•å…¥äº†Springæ¡†æ¶ï¼Œæ•°æ®æºã€æ„å»ºç­‰å·¥ä½œå°±äº¤ç»™äº†Springç®¡ç†ã€‚

# 2.4.1ã€åˆ›å»ºå­Module

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:schemaLocation="http://maven.apache.org/POM/4.0.0"
    http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>itcast-mybatis-plus</artifactId>
        <groupId>cn.itcast.mp</groupId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <modelversion>4.0.0</modelversion>
    <artifactId>itcast-mybatis-plus-spring</artifactId>
    <properties>
        <spring.version>5.1.6.RELEASE</spring.version>
    </properties>
</xml>
```

```xml
18 <dependencies>   
19 <dependency>   
20 <groupId>org.springframework</groupId>   
21 <artifactId>spring-web MVC</artifactId>   
22 <version>\$\{spring.version\}</version>   
23 </dependency>   
24 <dependency>   
25 <groupId>org.springframework</groupId>   
26 <artifactId>spring-jdbc</artifactId>   
27 <version>\$\{spring.version\}</version>   
28 </dependency>   
29 <dependency>   
30 <groupId>org.springframework</groupId>   
31 <artifactId>spring-test</artifactId>   
32 <version>\$\{spring.version\}</version>   
33 </dependency>   
34 </dependencies>   
35   
36   
37 </project>
```

# 2.4.2ã€å®ç°æŸ¥è¯¢User

ç¬¬ä¸€æ­¥ï¼Œç¼–å†™jdbc.properties

```batch
1 jdbc.driver=com.mysql.jdbc.Driver   
2 jdbc.url  $\equiv$  jdbc:mysql://127.0.0.1:3306/mp? useUnicode  $\equiv$  true&characterEncoding  $\equiv$  utf8&autoReconnect  $\equiv$  true&allowMultiQueries  $\equiv$  true&useSSL  $=$  false   
3 jdbc username  $\equiv$  root   
4 jdbc.password  $\equiv$  root
```

ç¬¬äºŒæ­¥ï¼Œç¼–å†™applicationContext.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans">
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi: schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans spring-beans.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/contextspring-context.xsd">
    <context:property-placeholder location="classpath*:properties"/>
</context:property-placeholder location="classpath*:properties"/>
<!-- å®šä¹‰æ•°æ®æº -->
<bean id="dataSource" class="com.alibaba.druid.pool.D DruidDataSource"
destroy-method="close">
    <property name="url" value="/${jdbc.url}" />
    <property name="username" value="/${jdbc username}" />
    <property name="password" value="/${jdbc.password}" />
    <property name="driverClassName" value="/${jdbc.driver}" />
```

ç¬¬ä¸‰æ­¥ï¼Œç¼–å†™Userå¯¹è±¡ä»¥åŠUserMapperæ¥å£ï¼š

```html
19 <property name="maxActive" value="10"/>   
20 <property name="minIdle" value="5"/>   
21 </bean>   
22   
23 <!--è¿™é‡Œä½¿ç”¨MPæä¾›çš„sqlSessionFactoryï¼Œå®Œæˆäº†Springä¸MPçš„æ•´åˆ-->   
24 <bean id="sqlSessionFactory" class  $=$  "com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean"> <property name  $=$  "dataSource" ref  $=$  "dataSource"/>   
25 </bean>   
26   
27   
28 <!--æ‰«æmapperæ¥å£ï¼Œä½¿ç”¨çš„ä¾ç„¶æ˜¯MybatisåŸç”Ÿçš„æ‰«æå™¨-->   
29 <bean class  $=$  "org.mybatis.spring mapper MapperScannerConfigurer"> <property name  $=$  "basePackage" value  $=$  "cn.itcast.mp/simple.mapper"/>   
30   
31   
32   
33 </beans>   
34
```

```java
1 package cn.itcast.mp/simple.pojo;   
2   
3 import com.baomidou.mybatisplus.annotation.TableName;   
4 import lombok.AllArgsConstructor;   
5 import lombok.Data;   
6 import lombok.NoArgsConstructor;   
7   
8 @Data   
9 @NoArgsConstructor   
10 @AllArgsConstructor   
11 @TableName("tb_user")   
12 public class User {   
13 private Long id;   
15 private String userName;   
16 private String password;   
17 private String name;   
18 private Integer age;   
19 private String email;   
20 }
```

ç¬¬å››æ­¥ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š

```typescript
1 package cn.itcast.mp.simple mapper;   
2   
3 import cn.itcast.mp.simple.pojo.User;   
4 import com.baomidou.mybatisplus.core mapper.BaseMapper;   
5   
6 public interface UserMapper extends BaseMapper{   
7   
8 }
```

æµ‹è¯•ï¼š

```java
package cn.itcast.mp/simple;   
import cn.itcast.mp.simple mapper.UserMapper;   
import cn.itcast.mp.simple.pojo.user;   
import org.junit.Test;   
import org.junit runner.Runwith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.test.context.Configuration;   
import org.springframework.test.context{junit4.SpringJUnit4ClassRunner;   
import java.util.List;   
@RunWith(SpringJUnit4ClassRunner.class)   
@ContextConfigurationLocations  $\equiv$  "classpath:applicationContext.xml")   
public class TestSpringMP{ @Autowired private ç”¨æˆ·UserMapper userMapper; @Test public void testSelectList(){ List<user> users  $=$  this.userMapper.selectList(null); for (User user : users){ System.out.println(user); } 1
```

```txt
[main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] => Preparing:  
SELECT id, user_name, password, name, age, email FROM tb_user  
[main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] => Parameters:  
[main] [cn.itcast.mp/simple)mapper.UserMapper.selectList]-[DEBUG] <= Total: 5  
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional  
SqlSession [org.apache.ibatis.session.defaultDefaults.DefaultSqlSession@74287ea3]  
User(id=1, userName=zhangsan, password=123456, name=å¼ ä¸‰ï¼Œage=18,  
email=test1@itcast.cn)  
User(id=2, userName=lisi, password=123456, name=æå››ï¼Œage=20ï¼Œemail=test2@itcast.cn)  
User(id=3, userName=wangwu, password=123456, name=ç‹äº”ï¼Œage=28ï¼Œemail=test3@itcast.cn)  
User(id=4, userName=zhaoliu, password=123456, name=èµµå…­ï¼Œage=21ï¼Œemail=test4@itcast.cn)  
User(id=5, userName=sunqi, password=123456, name=å­™ä¸ƒï¼Œage=24ï¼Œemail=test5@itcast.cn)
```

# 2.5ã€SpringBoot + Mybatis + MP

ä½¿ç”¨SpringBootå°†è¿›ä¸€æ­¥çš„ç®€åŒ–MPçš„æ•´åˆï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä½¿ç”¨SpringBootéœ€è¦ç»§æ‰¿parentï¼Œæ‰€ä»¥éœ€è¦é‡æ–°åˆ›å»ºå·¥ç¨‹ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºå­Moduleã€‚

# 2.5.1ã€åˆ›å»ºå·¥ç¨‹

# 1

# New Project

# X

GroupId

cn.itcast.mp

Inherit

ArtifactId

itcast-mp-springboot

Version

1.0-SNAPSHOT

Previous

Next

Cancel

Help

# 2.5.2ã€å¯¼å…¥ä¾èµ–

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
		\xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://maven.apache.org/POM/4.0.0"
http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelversion>4.0.0</modelversion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.1.4.RELEASE</version>
    </parent>
    <groupId>cn.itcast.mp</groupId>
    <artifactId>itcast-mp-springboot</artifactId>
    <version>1.0-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
            <exclusions>
                <exclusion>
```

```xml
<groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-logging</artifactId> </exclusion> </exclusions> </dependency> <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-test</artifactId> <scope>test</scope> </dependency>   
<!--ç®€åŒ–ä»£ç çš„å·¥å…·åŒ…-->   
<dependency> <groupId>org.projectlombok</groupId> <artifactId>lombok</artifactId> <optional>true</optional> </dependency>   
<!--mybatis-plusçš„springbootæ”¯æŒ-->   
<dependency> <groupId>com.baomidou</groupId> <artifactId>mybatis-plus-boot-starter</artifactId> <version>3.1.1</version> </dependency>   
<!--mysqIé©±åŠ¨-->   
<dependency> <groupId>mysql</groupId> <artifactId>mysql-connector-java</artifactId> <version>5.1.47</version>   
</dependency>   
<dependency> <groupId>org.slf4j</groupId> <artifactId>slf4j-log4j12</artifactId> </dependency>   
</dependencies>   
<build> <plugins> <plugin> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-maven-plugin</artifactId> </plugin> </plugins> </build>
```

log4j.properties :

```batch
1 log4j.rootLogger  $\equiv$  DEBUG,A1   
2   
3 log4j.append.A1=org.apache.log4j(ConsoleAppender   
4 log4j.append.A1.layout  $\equiv$  org.apache.log4j.PatternLayout   
5 log4j.append.A1.layout.ConversionPattern  $=$  [%t] [%c]-[%p] %m%n
```

# 2.5.3ã€ç¼–å†™application.properties

```txt
1 spring.application.name  $=$  itcast-mp-springboot   
2   
3 springdatasource.driver-class-name  $\equiv$  com.mysql.jdbc.Driver   
4 springdatasource.url  $\equiv$  jdbc:mysql://127.0.0.1:3306/mp?   
useUnicode  $\equiv$  true&characterEncoding  $\equiv$  utf8&autoReconnect  $\equiv$  true&allowMultiQueries  $\equiv$  true&useSSL =false   
5 springdatasource username  $\equiv$  root   
6 springdatasource.password  $\equiv$  root
```

# 2.5.4ã€ç¼–å†™pojo

```java
1 package cn.itcast.mp.pojo;   
2   
3 import com.baomidou.mybatisplus. annotation.TableName;   
4 import lombok.AllArgsConstructor;   
5 import lombok.Data;   
6 import lombok.NoArgsConstructor;   
7   
8 @Data   
9 @NoArgsConstructor   
10 @AllArgsConstructor   
11 @tableName("tb_user")   
12 public class User {   
13   
14 private Long id;   
15 private String userName;   
16 private String password;   
17 private String name;   
18 private Integer age;   
19 private String email;   
20 }
```

# 2.5.5ã€ç¼–å†™mapper

```java
1 package cn.itcast.mp mapper;   
2   
3 import cn.itcast.mp.pojo.User;   
4 import com.baomidou.mybatisplus.core mapper.BaseMapper;   
5   
6 public interface UserMapper extends BaseMapper{   
7 }   
8
```

# 2.5.6ã€ç¼–å†™å¯åŠ¨ç±»

```java
1 package cn.itcast.mp;   
2   
3 import org.mybatis.spring.annotation MapperScan;   
4 import org.springframework.boot.SpringApplication;   
5 import org.springframework.boot.webApplicationType;   
6 import org.springframework.boot.autoconfigure.SpringBootApplication;   
7 import org.springframework.boot.builder.SpringApplicationBuilder;   
8   
9 @MapperScan("cn.itcast.mp mapper")//è®¾ç½®mapperæ¥å£çš„æ‰«æåŒ…   
10 @SpringBootApplication   
11 public class MyApplication {   
12 public static void main(String[] args) { SpringApplication.run (MyApplication.class, args); }   
15   
16   
17 }
```

# 2.5.7ã€ç¼–å†™æµ‹è¯•ç”¨ä¾‹

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp mapper.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import org.junit.Test;   
6 import org.junit runner.Runwith;   
7 import org.springframework.beans.factory.annotation.Autowired;   
8 import org.springframework.boot.test.context.SpringBootTest;   
9 import org.springframework.test.context.Junit4.SpringRunner;   
10   
11 import java.util.List;   
12   
13 @RunWith(SpringRunner.class)   
14 @SpringBootTest   
15 public class UserMapperTest {   
16 @Autowired private ç”¨æˆ·Mapper userMapper;   
17   
18   
19   
20   
21   
22   
23   
24   
25   
26   
27   
28 }
```

æµ‹è¯•ï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $\Longrightarrow$  Preparing: SELECT id, user_name, password, name, age, email FROM tb_user   
2 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $\Longrightarrow$  Parameters:   
3 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $<   =   =$  Total: 5   
4 [main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional   
SqlSession [org.apache.ibatis.session.defaultDefaults.DefaultSqlSession@14faa38c]   
5 User(id=1, userName=zhangsan, password=123456, name=å¼ ä¸‰ï¼Œage=18ï¼Œemail  $\equiv$  test1@itcast.cn)   
6 User(id=2, userName=1isi, password=123456, name=æå››ï¼Œage=20ï¼Œemail  $\equiv$  test2@itcast.cn)   
7 User(id=3, userName=wangwu, password=123456, name=ç‹äº”ï¼Œage=28ï¼Œemail  $\equiv$  test3@itcast.cn)   
8 User(id=4, userName=zhaoliu, password=123456, name=èµµå…­ï¼Œage=21ï¼Œemail  $\equiv$  test4@itcast.cn)   
9 User(id=5, userName=sunqi, password=123456, name=å­™ä¸ƒï¼Œage=24ï¼Œemail  $\equiv$  test5@itcast.cn)
```

# 3ã€é€šç”¨CRUD

é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬äº†è§£åˆ°é€šè¿‡ç»§æ‰¿BaseMapperå°±å¯ä»¥è·å–åˆ°å„ç§å„æ ·çš„å•è¡¨æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¯¦ç»†è®²è§£è¿™äº›æ“ä½œã€‚

```txt
BaseMapper insert(T): int deleteByld(Serailizable): int deleteByMap(Map<String, Object>): int delete(Wrapper<T>): int deleteBatchIds(Collection<? extendsSerializable>): int updateById(T): int update(T, Wrapper<T>): int selectByld(Serailizable): T selectBatchIDS(Collection<? extendsSerializable>): List<T> selectByMap(Map<String, Object>): List<T> selectOne(Wrapper<T>): T selectCount(Wrapper<T>): Integer selectList(Wrapper<T>): List<T> selectMaps(Wrapper<T>): List<Map<String, Object>> selectObjects(Wrapper<T>): List<Object> selectPage(IPage<T>, Wrapper<T>): IPage<T> selectMapsPage(IPage<T>, Wrapper<T>): IPage<Map<String, Object>>
```

# 3.1ã€æ’å…¥æ“ä½œ

# 3.1.1ã€æ–¹æ³•å®šä¹‰

```c
1 /\*\*  
2 \*æ’å…¥ä¸€æ¡è®°å½•  
3 \*  
4 \* @param entity å®ä½“å¯¹è±¡  
5 \*/  
6 int insert(T entity);
```

# 3.1.2ã€æµ‹è¯•ç”¨ä¾‹

```java
package cn.itcast.mp;   
import cn.itcast.mp.mapping.UserMapper;   
import cn.itcast.mp.pojo.User;   
import org.junit.Test;   
import org.junit runner.RunWith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context.Junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest {   
    @Autowired   
    private UserMapper userMapper;   
    @Test   
    public void testInsert(){   
        User user = new User();   
        user.setAge(20);   
        user.setEmail("test@itcast.cn");   
        user.setName("æ›¹æ“");   
        user.setUserName("caocao");   
        user.setPassword("123456");   
    }   
    int result = this.userMapper.insert(user); //è¿”å›çš„ç»“æœæ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå¹¶ä¸æ˜¯è‡ªå¢åçš„id  
    System.out.println(result + result);   
    System.out.println(user.getId()); //è‡ªå¢åçš„idä¼šå›å¡«åˆ°å¯¹è±¡ä¸­  
}
```

# 3.1.3ã€æµ‹è¯•

```ini
1 [main] [cn.itcast.mp mapper.UserMapper.insert]-[DEBUG] => Preparing: INSERT INTO tb_user (id, user_name, password, name, age, email) VALUES (?, ?, ?, ?,?, ?)  
2 [main] [cn.itcast.mp mapper.UserMapper.insert]-[DEBUG] => Parameters: 1122045867793072130(Long), caocao(String), 123456(String),æ›¹æ“(String), 20(Integer), test@itcast.cn(String)  
3 [main] [cn.itcast.mp mapper.UserMapper.insert]-[DEBUG] <= Updates: 1  
4 [main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] closing non transactionalSqlSession [org.apache~-].session.default Defaults.DefaultSqlSession@411291e5]  
5 result = 1  
6 1122045867793072130
```

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547177.jpg)

å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®å·²ç»å†™å…¥åˆ°äº†æ•°æ®åº“ï¼Œä½†æ˜¯ï¼Œidçš„å€¼ä¸æ­£ç¡®ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯æ•°æ®åº“è‡ªå¢é•¿ï¼Œå®é™…æ˜¯MPç”Ÿæˆäº†idçš„å€¼å†™å…¥åˆ°äº†æ•°æ®åº“ã€‚

å¦‚ä½•è®¾ç½®idçš„ç”Ÿæˆç­–ç•¥å‘¢ï¼Ÿ

MPæ”¯æŒçš„idç­–ç•¥ï¼š

```java
package com.baomidou.mybatisplus_annotation;   
import lombokgetter;   
/\*\*   
\*ç”ŸæˆIDç±»å‹æšä¸¾ç±»   
\*   
\* @author hubin   
\* @since 2015-11-10   
\*/   
@Setter   
public enum IdType { /\*\* \* æ•°æ®åº“IDè‡ªå¢ \*/   
AUTO(O)ï¼Œ /\*\* \*è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹ \*/   
NONE(1)ï¼Œ /\*\* \* ç”¨æˆ·è¾“å…¥ID \*è¯¥ç±»å‹å¯ä»¥é€šè¿‡è‡ªå·±æ³¨å†Œè‡ªåŠ¨å¡«å……æ’ä»¶è¿›è¡Œå¡«å……</p> /\*   
INPUT(2)ï¼Œ   
/\*ä»¥ä¸‹3ç§ç±»å‹ã€åªæœ‰å½“æ’å…¥å¯¹è±¡IDä¸ºç©ºï¼Œæ‰è‡ªåŠ¨å¡«å……ã€‚\*/ /\*\* \*å…¨å±€å”¯ä¸€ID(idworker) \*/   
ID_WORKER(3),   
/\*\* \*å…¨å±€å”¯ä¸€IDï¼ˆUUIDï¼‰   
\*/   
UUID(4)ï¼Œ
```

ä¿®æ”¹Userå¯¹è±¡ï¼š

```txt
36 /\*\*   
37 \*å­—ç¬¦ä¸²å…¨å±€å”¯ä¸€IDï¼ˆidWorkerçš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰   
38 \*/   
39 ID_WORKER_str(5);   
40   
41 private final int key;   
42   
43 IdType(int key){   
44 this.key = key;   
45 }   
46 }   
47
```

æ•°æ®æ’å…¥æˆåŠŸï¼š

```java
1 package cn.itcast.mp.pojo;   
2   
3 import com.baomidou.mybatisplus_annotation.IdType;   
4 import com.baomidou.mybatisplus_annotation.TableId;   
5 import com.baomidou.mybatisplus_annotation.TableName;   
6 import lombok.AllArgsConstructor;   
7 import lombok.Data;   
8 import lombok.NoArgsConstructor;   
9   
10 @Data   
11 @NoArgsConstructor   
12 @AllArgsConstructor   
13 @tableName("tb_user")   
14 public class User {   
15 @TableId(type = IdType.AUTO) //æŒ‡å®šidç±»å‹ä¸ºè‡ªå¢é•¿   
16 private Long id;   
17 private String userName;   
18 private String password;   
19 private String name;   
20 private String name;   
21 private Integer age;   
22 private String email;   
23 }
```

```txt
id user_name password name age email 1 zhangsan 123456 å¼ ä¸‰ 18 test1@itcast.cn 2 lisi 123456 æå›› 20 test2@itcast.cn 3 wangwu 123456 ç‹äº” 28 test3@itcast.cn 4 zhaoliu 123456 èµµå…­ 21 test4@itcast.cn 5 sunqi 123456 å­™ä¸ƒ 24 test5@itcast.cn 6 caocao 123456 æ›¹æ“ 20 test@itcast.cn
```

# 3.1.4ã€@TableField

åœ¨MPä¸­é€šè¿‡@TableFieldæ³¨è§£å¯ä»¥æŒ‡å®šå­—æ®µçš„ä¸€äº›å±æ€§ï¼Œå¸¸å¸¸è§£å†³çš„é—®é¢˜æœ‰2ä¸ªï¼š

1ã€å¯¹è±¡ä¸­çš„å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜ï¼ˆéé©¼å³°ï¼‰  
2ã€å¯¹è±¡ä¸­çš„å±æ€§å­—æ®µåœ¨è¡¨ä¸­ä¸å­˜åœ¨çš„é—®é¢˜

ä½¿ç”¨ï¼š

```java
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName("tb_user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    private String userName;
    private String password;
    private String name;
    private Integer age;
    @TableField(value = "email") //è§£å†³å­—æ®µåä¸ä¸€è‡´
    private String mail;
    @TableField(exist = false)
    private String address; //è¯¥å­—æ®µåœ¨æ•°æ®åº“è¡¨ä¸­ä¸å­˜åœ¨
}
```

å…¶ä»–ç”¨æ³•ï¼Œå¦‚å¤§å­—æ®µä¸åŠ å…¥æŸ¥è¯¢å­—æ®µï¼š

```java
@TableName("tb_user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    private String userName;
    @TableField(select = false)
    private String password;
    private String name;
    private Integer age;
    @TableField(value = "email") //è§£å†³å­—æ®µåä¸ä¸€è‡´
    private String mail;
```

æ•ˆæœï¼š

```txt
[main] [org.mybatis.spring.SqlSessionUtiles]-[DEBUG] Closing non transactional.SqlSessionUser(id=1, userName=zhangsan, password=NULL, name=å¼ ä¸‰, age=18, mail=test1@itcast.cn, addUser(id=2, userName=lisi, password=NULL, name=æå››, age=20, mail=test2@itcast.cn, addUser(id=3, userName=wangwu, password=NULL, name=ç‹äº”, age=28, mail=test3@itcast.cn, addUser(id=4, userName=zhaoliu, password=NULL, name=èµµå…­, age=21, mail=test4@itcast.cn, addUser(id=5, userName=sunqi, password=NULL, name=å­™ä¸ƒ, age=24, mail=test5@itcast.cn, addUser(id=6, userName=caocao, password=NULL, name=æ›¹æ“, age=20, mail=test@itcast.cn, add
```

# 3.2ã€æ›´æ–°æ“ä½œ

åœ¨MPä¸­ï¼Œæ›´æ–°æ“ä½œæœ‰2ç§ï¼Œä¸€ç§æ˜¯æ ¹æ®idæ›´æ–°ï¼Œå¦ä¸€ç§æ˜¯æ ¹æ®æ¡ä»¶æ›´æ–°ã€‚

# 3.2.1ã€æ ¹æ®idæ›´æ–°

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /* */
2 * æ ¹æ® ID ä¿®æ”¹
3 */
4 * @param entity å®ä½“å¯¹è±¡
5 */
6 int updateById(@Param(Constants.ENTITY) T entity);
```

æµ‹è¯•ï¼š

```java
1 @RunWith(SpringRunner.class)   
2 @SpringBootTest   
3 public class ç”¨æˆ·MapperTest {   
4 @Autowired   
6 private ç”¨æˆ·Mapper userMapper;   
7   
8 @Test   
9 public void testUpdateById() {   
10 User user = new User();   
11 user.setld(6L); //ä¸»é”®   
12 user.setAge(21); //æ›´æ–°çš„å­—æ®µ   
13   
14 //æ ¹æ®idæ›´æ–°ï¼Œæ›´æ–°ä¸ä¸ºnullçš„å­—æ®µ   
15 this.userMapper.updateByld(user);   
16 }   
17   
18 }
```

ç»“æœï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.updateById]-[DEBUG] => Preparing: UPDATE tb_user SET age=? WHERE id=?  
2 [main] [cn.itcast.mp mapper.UserMapper.updateById]-[DEBUG] => Parameters: 21(Integer), 6(Long)  
3 [main] [cn.itcast.mp mapper.UserMapper.updateById]-[DEBUG] <= Updates: 1
```

<table><tr><td>id</td><td>user_name</td><td>password</td><td>name</td><td>age</td><td>email</td></tr><tr><td>1</td><td>zhangsan</td><td>123456</td><td>å¼ ä¸‰</td><td>18</td><td>test1@itcast.cn</td></tr><tr><td>2</td><td>lisi</td><td>123456</td><td>æå››</td><td>20</td><td>test2@itcast.cn</td></tr><tr><td>3</td><td>wangwu</td><td>123456</td><td>ç‹äº”</td><td>28</td><td>test3@itcast.cn</td></tr><tr><td>4</td><td>zhaoliu</td><td>123456</td><td>èµµå…­</td><td>21</td><td>test4@itcast.cn</td></tr><tr><td>5</td><td>sunqi</td><td>123456</td><td>å­™ä¸ƒ</td><td>24</td><td>test5@itcast.cn</td></tr><tr><td>6</td><td>caocao</td><td>123456</td><td>æ›¹æ“</td><td>21</td><td>test@itcast.cn</td></tr></table>

# 3.2.2ã€æ ¹æ®æ¡ä»¶æ›´æ–°

æ–¹æ³•å®šä¹‰ï¼š

```txt
/**
* æ ¹æ®.whereEntityæ¡ä»¶ï¼Œæ›´æ–°è®°å½•
*/
* @param entity å®ä½“å¯¹è±¡ï¼ˆsetæ¡ä»¶å€¼ï¼Œå¯ä»¥ä¸ºnullï¼‰
* @param updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸ºnullï¼Œé‡Œé¢çš„entityç”¨äºç”Ÿæˆwhereè¯­å¥ï¼‰
*/
int update(@Param(Constants.ENTRY) T entity, @Param(Constants.WRAPPER) Wrapper<T> updaterWrapper);
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp mapper.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions-wrapper;   
6 import com.baomidou.mybatisplus.core_conditions/query(QueryWrapper;   
7 import com.baomidou.mybatisplus.core_conditions.update.UpdateWrapper;   
8 import net.mindev.json.writer.UpdaterMapper;   
9 import org.junit.Test;   
10 import org.junit runner. Runwith;   
11 import org.springframework.beans.factory.annotation.Autowired;   
12 import org.springframework.boot.test.context.SpringBootTest;   
13 import org.springframework.test.context{junit4.SpringRunner;   
14   
15 import java.util.List;   
16   
17 @RunWith(SpringRunner.class)   
18 @SpringBootTest   
19 public class UserMapperTest {   
20   
21 @Autowired   
22 private ç”¨æˆ·Mapper userMapper;   
23   
24 @Test   
25 public void testUpdate() {
```

```txt
26 User user = new User();   
27 user.setAge(22); //æ›´æ–°çš„å­—æ®µ   
28   
29 //æ›´æ–°çš„æ¡ä»¶   
30 Querywrapper<user> wrapper = new Querywrapper<>();   
31 wrapper EQ("id", 6);   
32   
33 //æ‰§è¡Œæ›´æ–°æ“ä½œ   
34 int result = this.userMapper.update(user, wrapper);   
35 System.out.println("result = " + result);   
36 }   
37   
38 }
```

æˆ–è€…ï¼Œé€šè¿‡UpdateWrapperè¿›è¡Œæ›´æ–°ï¼š

```java
1 @Test   
2 public void testUpdate() {   
3 //æ›´æ–°çš„æ¡ä»¶ä»¥åŠå­—æ®µ Updatewrapper<User> wrapper = new Updatewrapper<>(); wrapper EQ("id", 6).set("age", 23);   
5   
6   
7 //æ‰§è¡Œæ›´æ–°æ“ä½œ int result = this.UserMapper.update(null, wrapper); System.out.println("result = " + result);   
9   
10 }
```

æµ‹è¯•ç»“æœï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.update]-[DEBUG]  $\Longrightarrow$  Preparing: UPDATE tb_user SET age  $=$  ? WHERE id  $=$  ?   
2 [main] [cn.itcast.mp mapper.UserMapper.update]-[DEBUG]  $\Longrightarrow$  Parameters: 23(Integer), 6(Integer)   
3 [main] [cn.itcast.mp mapper.UserMapper.update]-[DEBUG]  $<   =   =$  Updates: 1
```

å‡å¯è¾¾åˆ°æ›´æ–°çš„æ•ˆæœã€‚

å…³äºwrapperæ›´å¤šçš„ç”¨æ³•åé¢ä¼šè¯¦ç»†è®²è§£ã€‚

# 3.3ã€åˆ é™¤æ“ä½œ

# 3.3.1ã€deleteByld

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /\*\*  
2 \*æ ¹æ®IDåˆ é™¤  
3 \*  
4 \* @param idä¸»é”®ID  
5 \*/  
6 int deleteById(Serailizable id);
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import org.junit.Test;   
5 import org.junit runner. Runwith;   
6 import org.springframework.beans.factory.annotation.Autowired;   
7 import org.springframework.boot.test.context.SpringBootTest;   
8 import org.springframework.test.context.Junit4.SpringRunner;   
9   
10 @RunWith(SpringRunner.class)   
11 @SpringBootTest   
12 public class UserMapperTest {   
13 @Autowired   
15 private ç”¨æˆ·Mapper userMapper;   
16   
17 @Test   
18 public void testDeleteById() {   
19 //æ‰§è¡Œåˆ é™¤æ“ä½œ   
20 int result  $=$  this.userMapper.deleteByld(6L);   
21 System.out.println("result  $=$  " + result);   
22 }   
23   
24 }
```

ç»“æœï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper(deleteById] - [DEBUG] => Preparing: DELETE FROM tb_user WHERE id=?  
2 [main] [cn.itcast.mp mapper.UserMapper(deleteById] - [DEBUG] => Parameters: 6(Long)  
3 [main] [cn.itcast.mp mapper.UserMapper(deleteById] - [DEBUG] <= Updates: 1
```

```txt
id user_name password name age email 1 zhangsan 123456 å¼ ä¸‰ 18 test1@itcast.cn 2 lisi 123456 æå›› 20 test2@itcast.cn 3 wangwu 123456 ç‹äº” 28 test3@itcast.cn 4 zhaoliu 123456 èµµå…­ 21 test4@itcast.cn 5 sunqi 123456 å­™ä¸ƒ 24 test5@itcast.cn
```

æ•°æ®è¢«åˆ é™¤ã€‚

# 3.3.2ã€deleteByMap

æ–¹æ³•å®šä¹‰ï¼š

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 /***
2 * æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•
3 */
4 * @param columnMap è¡¨å­—æ®µ map å¯¹è±¡
5 */
6 int deleteByMap(@Paramå…¬ç¤¾Constants.COLUMN_MAP) Map<String, Object> columnMap);
```

ç»“æœï¼š

```java
package cn.itcast.mp;   
import cn.itcast.mp)mapper.UserMapper;   
import org.junit.Test;   
import org.junit runner. Runwith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context{j unit4.SpringRunner;   
import java.util.HasMap;   
import java.util.Map;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest{ @Autowired private ç”¨æˆ·UserMapper userMapper; @Test public void testDeleteByMap(){ Map<String, Object> columnMap  $=$  new HashMap<>(); columnMap.put("age",20); columnMap.put("name","å¼ ä¸‰"); //å°†columnMapä¸­çš„å…ƒç´ è®¾ç½®ä¸ºåˆ é™¤çš„æ¡ä»¶ï¼Œå¤šä¸ªä¹‹é—´ä¸ºandå…³ç³» int result  $=$  this.userMapper.deleteByMap(columnMap); System.out.println("result  $=$  " + result); }   
}
```

```txt
1 [main] [cn.itcast.mp.mapping.UserMapper(deleteByMap]-[DEBUG] => Preparing: DELETE FROM tb_user WHERE name = ? AND age = ?  
2 [main] [cn.itcast.mpAPPING.UserMapper(deleteByMap]-[DEBUG] => Parameters: å¼ ä¸‰ (String), 20(Integer)  
3 [main] [cn.itcast.mpAPPING.UserMapper(deleteByMap]-[DEBUG] <= Updates: 0
```

# 3.3.3ã€delete

# æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /\*\*  
2 \*æ ¹æ®entityæ¡ä»¶ï¼Œåˆ é™¤è®°å½•  
3 \*  
4 \* @paramwrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸ºnullï¼‰  
5 \*/  
6 int delete(@Param(Constants.WRAPPER) Wrapper<T> wrapper);
```

# æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
6 import org.junit.Test;   
7 import org.junit;krunner. Runwith;   
8 import org.springframework.beans.factory.annotation.Autowired;   
9 import org.springframework.boot.test.context.SpringBootTest;   
10 import org.springframework.test.context.junit4.SpringRunner;   
11   
12 import java.util.HasMap;   
13 import java.util. Map;   
14   
15 @RunWith(SpringRunner.class)   
16 @SpringBootTest   
17 public class UserMapperTest {   
18 @Autowired   
20 private ç”¨æˆ·Mapper userMapper;   
21   
22 @Test   
23 public void testDeleteByMap() {   
24 User user  $=$  new User();   
25 user.setAge(20);   
26 user.setName("å¼ ä¸‰");   
27   
28 //å°†å®ä½“å¯¹è±¡è¿›è¡ŒåŒ…è£…ï¼ŒåŒ…è£…ä¸ºæ“ä½œæ¡ä»¶   
29 QueryWrapper<User> wrapper  $=$  new QueryWrapper<> (user);   
30   
31 int result  $=$  this.userMapper deleteç©°pper);   
32 System.out.println("result  $=$  " + result);   
33 }   
34   
35 }
```

# ç»“æœï¼š

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.delete]-[DEBUG] => Preparing: DELETE FROM tb_user WHERE name=? AND age=?  
2 [main] [cn.itcast.mp mapper.UserMapper.delete]-[DEBUG] => Parameters: å¼ ä¸‰(String), 20(Integer)  
3 [main] [cn.itcast.mp mapper.UserMapperdelete]-[DEBUG] <= Updates: 0
```

# 3.3.4ã€deleteBatchIds

æµ‹è¯•ç”¨ä¾‹ï¼š

```txt
1 /* 
2 * åˆ é™¤ï¼ˆæ ¹æ®IDæ‰¹é‡åˆ é™¤ï¼‰
3 */
4 @param idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º nullä»¥åŠ empty)
5 */
6 int deleteBatchIds(@Param(Constants.COLOLECTION) Collection<? extendsSerializable> idList);
```

ç»“æœï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import org.junit.Test;   
5 import org.junit runner. RunWith;   
6 import org.springframework.beans.factory.annotation.Autowired;   
7 import org.springframework.boot.test.context.SpringBootTest;   
8 import org.springframework.test.context{j unit4.SpringRunner;   
9   
10 import java.util. Arrays;   
11   
12 @RunWith(SpringRunner.class)   
13 @SpringBootTest   
14 public class UserMapperTest {   
15 @Autowired   
16 private ç”¨æˆ·Mapper userMapper;   
17   
18 @Test   
19   
20 public void testDeleteByMap(){   
21 //æ ¹æ®idé›†åˆæ‰¹é‡åˆ é™¤   
22 int result  $=$  this.userMapper.deleteBatchIds(Arrays.asList(1L,10L,20L));   
23 System.out.println("result  $=$  " + result);   
24 }   
25   
26 }
```

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.deleteBatchIds]-[DEBUG] => Preparing: DELETE FROM tb_user WHERE id IN (?,?,?,?)  
2 [main] [cn.itcast.mp mapper.UserMapper.deleteBatchIds]-[DEBUG] => Parameters: 1(Long), 10(Long), 20(Long)  
3 [main] [cn.itcast.mp mapper.UserMapperdeleteBatchIds]-[DEBUG] <= Updates: 1
```

# 3.4ã€æŸ¥è¯¢æ“ä½œ

MPæä¾›äº†å¤šç§æŸ¥è¯¢æ“ä½œï¼ŒåŒ…æ‹¬æ ¹æ®idæŸ¥è¯¢ã€æ‰¹é‡æŸ¥è¯¢ã€æŸ¥è¯¢å•æ¡æ•°æ®ã€æŸ¥è¯¢åˆ—è¡¨ã€åˆ†é¡µæŸ¥è¯¢ç­‰æ“ä½œã€‚

# 3.4.1ã€selectByld

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /\*\*  
2 \* æ ¹æ®IDæŸ¥è¯¢  
3 \*  
4 \* @param id ä¸»é”®ID  
5 \*/  
6 T selectById(Serailizable id);
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import org.junit.Test;   
6 import org.junit runner. RunWith;   
7 import org.springframework.beans.factory.annotation.Autowired;   
8 import org.springframework.boot.test.context.SpringBootTest;   
9 import org.springframework.test.context.Junit4.SpringRunner;   
10 @RunWith(SpringRunner.class)   
12 @SpringBootTest   
13 public class UserMapperTest {   
14 @Autowired   
16 private ç”¨æˆ·Mapper userMapper;   
17   
18 @Test   
19 public void testSelectById() {   
20 //æ ¹æ®idæŸ¥è¯¢æ•°æ®   
21 User user  $=$  this.userMapper.selectByld(2L);   
22 System.out.println("result  $\equiv$  "  $^+$  user);   
23 }   
24   
25 }
```

ç»“æœï¼š

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.selectByld]-[DEBUG]  $\Longrightarrow$  Preparing: SELECT id, user_name, password, name, age, email FROM tb_user WHERE id=?   
2 [main] [cn.itcast.mp mapper.UserMapper.selectByld]-[DEBUG]  $\Longrightarrow$  Parameters: 2(Long)   
3 [main] [cn.itcast.mp mapper.UserMapper.selectByld]-[DEBUG]  $<   =   =$  Total: 1   
4   
5 result  $=$  User(id=2ï¼ŒuserName=1isiï¼Œpassword=123456ï¼Œname=æå››ï¼Œage=20ï¼Œ email  $\equiv$  test2@itcast.cnï¼Œaddress  $\equiv$  null)
```

# 3.4.2ã€selectBatchIds

æµ‹è¯•ç”¨ä¾‹ï¼š

```txt
1 /***
2 * æŸ¥è¯¢ï¼ˆæ ¹æ®IDæ‰¹é‡æŸ¥è¯¢ï¼‰
3 */
4 * @param idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º nullä»¥åŠ empty)
5 */
6 List<T> selectBatchIds(@Param(Constants.COllLECTION) Collection<? extendsSerializable>
    idList);
```

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp mapper.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import org.junit.Test;   
6 import org.junit runner. Runwith;   
7 import org.springframework.beans.factory.annotation.Autowired;   
8 import org.springframework.boot.test.context.SpringBootTest;   
9 import org.springframework.test.context{junit4.SpringRunner;   
10   
11 import java.util. Arrays;   
12 import java.util.List;   
13   
14 @RunWith(SpringRunner.class)   
15 @SpringBootTest   
16 public class UserMapperTest {   
17 @Autowired   
19 private Mapper userMapper;   
20   
21 @Test   
22 public void testSelectBatchIds() {   
23 //æ ¹æ®idé›†åˆæ‰¹é‡æŸ¥è¯¢   
24 List<User> users = this.userMapper.selectBatchIds(Arrays.asList(2L, 3L, 10L));   
25 for (User user : users) { System.out.println(user); }   
26 }   
27 }   
28 }   
29 }
```

ç»“æœï¼š

```sql
1 [main] [cn.itcast.mp mapper.UserMapper.selectBatchIds]-[DEBUG]  $\Longrightarrow$  Preparing: SELECT id, user_name, password, name, age, email FROM tb_user WHERE id IN (?, ,?, ?)   
2 [main] [cn.itcast.mp mapper.UserMapper.selectBatchIds]-[DEBUG]  $\Longrightarrow$  Parameters: 2(Long), 3(Long), 10(Long)   
3 [main] [cn.itcast.mp mapper.UserMapper.selectBatchIds]-[DEBUG]  $<   =   =$  Total: 2   
4   
5 User(id=2, userName=1isi, password=123456, name=æå››, age=20, email  $\equiv$  test2@itcast.cn, address  $\equiv$  null)   
6 User(id=3, userName  $\equiv$  wangwu, password=123456, name  $\equiv$  ç‹äº”ï¼Œage=28ï¼Œemail  $\equiv$  test3@itcast.cn, address  $\equiv$  null)
```

# 3.4.3ã€selectOne

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /***
2 * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•
3 */
4 * @param querywrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
5 */
6 T selectOne(@Param(Constants.WRAPPER) wrapper<T> queryWrapper);
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
6 import org.junit.Test;   
7 import org.junit runner.Runwith;   
8 import org.springframework.beans.factory.annotation.Autowired;   
9 import org.springframework.boot.test.context.SpringBootTest;   
10 import org.springframework.test.context.Junit4.SpringRunner;   
11   
12 @RunWith(SpringRunner.class)   
13 @SpringBootTest   
14 public class UserMapperTest {   
15 @Autowired   
16 private ç”¨æˆ·Mapper userMapper;   
17   
18   
19 @Test   
20 public void testSelectone() { QueryWrapper<user> wrapper = new QueryWrapper<user>(); wrapper EQ("name", "æå››");   
21 //æ ¹æ®æ¡ä»¶æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œå¦‚æœç»“æœè¶…è¿‡ä¸€æ¡ä¼šæŠ¥é”™   
22 User user = this.userMapper.selectOne(wrapper);
```

ç»“æœï¼š

```txt
System.out.println(user);   
27 }   
28   
29 }
```

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.selectOne]-[DEBUG] => Preparing: SELECT id, user_name, password, name, age, email FROM tb_user WHERE name = ?
2 [main] [cn.itcast.mp mapper.UserMapper.selectOne]-[DEBUG] => Parameters: æå››(String)
3 [main] [cn.itcast.mp mapper.UserMapper.selectOne]-[DEBUG] <= Total: 1
4
5 User(id=2, userName=1isi, password=123456, name=æå››, age=20, email test2@itcast.cn, address=null)
```

# 3.4.4ã€selectCount

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 /***
2 * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°
3 */
4 * @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
5 */
6 Integer selectCount(@Paramå…¬ç¤¾ICATIONS.WRAPPER) Wrapper<T> queryWrapper);
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
6 import org.junit.Test;   
7 import org.junit runner. RunWith;   
8 import org.springframework.beans.factory.annotation.Autowired;   
9 import org.springframework.boot.test.context.SpringBootTest;   
10 import org.springframework.test.context{j unit4.SpringRunner;   
11   
12 @RunWith(SpringRunner.class)   
13 @SpringBootTest   
14 public class UserMapperTest {   
15 @Autowired   
16 private ç”¨æˆ·Mapper userMapper;   
17   
18   
19 @Test   
20 public void testSelectCount() { QueryWrapper<User> wrapper = new QueryWrapper<user>(); wrapper.gt("age", 23); //å¹´é¾„å¤§äº23å²   
21
```

ç»“æœï¼š

```javascript
25 Integer count  $=$  this.userMapper.selectCount(wrapper);   
26 System.out.println("count  $= \text{ä¸²}$  + count);   
27 }   
28   
29 }
```

æ–¹æ³•å®šä¹‰ï¼š

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.selectCount]-[DEBUG] => Preparing: SELECT  
COUNT(1) FROM tb_user WHERE age > ?  
2 [main] [cn.itcast.mp mapper.UserMapper.selectCount]-[DEBUG] => Parameters: 23(Integer)  
3 [main] [cn.itcast.mp mapper.UserMapper.selectCount]-[DEBUG] <= Total: 1  
4 count = 2
```

# 3.4.5ã€selectList

æµ‹è¯•ç”¨ä¾‹ï¼š

```txt
1 /***
2 * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•
3 */
4 * @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
5 */
6 List<T> selectList(@Param(Constants.WRAPPER) wrapper<T> queryWrapper);
```

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
6 import org.junit.Test;   
7 import org.junit runner.Runwith;   
8 import org.springframework.beans.factory.annotation.Autowired;   
9 import org.springframework.boot.test.context.SpringBootTest;   
10 import org.springframework.test.context{junit4.SpringRunner;   
11   
12 import java.util.List;   
13   
14 @RunWith(SpringRunner.class)   
15 @SpringBootTest   
16 public class UserMapperTest {   
17   
18 @Autowired   
19 private ç”¨æˆ·Mapper userMapper;   
20   
21 @Test   
22 public void testSelectList(){ QueryWrapper<user> wrapper = new QueryWrapper<user>(); wrapper.gt("age", 23); //å¹´é¾„å¤§äº23å²
```

ç»“æœï¼š

```txt
25 //æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®  
26 List<user> users = this.userMapper.selectList wraps);  
27 for (User user : users) {  
28 System.out.println("user = " + user);  
30 }  
31 }  
32
```

æ–¹æ³•å®šä¹‰ï¼š

```batch
1 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $\equiv \equiv$  Preparing: SELECT id, user_name, password, name, age, email FROM tb_user WHERE age > ?   
2 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $\equiv \equiv$  Parameters: 23(Integer)   
3 [main] [cn.itcast.mp mapper.UserMapper.selectList]-[DEBUG]  $<   =   =$  Total: 2   
4   
5 user  $=$  User(id=3ï¼ŒuserName  $\equiv$  wangwuï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  ç‹äº”ï¼Œage  $\coloneqq$  28, email  $\equiv$  test3@itcast.cnï¼Œaddress  $\equiv$  null)   
6 user  $=$  User(id=5ï¼ŒuserName  $\equiv$  sunqiï¼Œpassword  $\coloneqq$  123456ï¼Œname  $\equiv$  å­™ä¸ƒï¼Œage  $\coloneqq$  24, email  $\equiv$  test5@itcast.cnï¼Œaddress  $\equiv$  null)
```

# 3.4.6ã€selectPage

é…ç½®åˆ†é¡µæ’ä»¶ï¼š

```java
1 /***
2 * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰
3 */
4 * @param page åˆ†é¡µæŸ¥è¯¢æ¡ä»¶ï¼ˆå¯ä»¥ä¸º RowBounds.DEFAULTï¼‰
5 * @param querywrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
6 */
7 IPage<T> selectPage(IPage<T> page, @Param(Constants.WRAPPER) Wrapper<T> queryWrapper);
```

```java
1 package cn.itcast.mp;   
2   
3 import com.baomidou.mybatisplusextensionplugins.PaginationInterceptor;   
4 import org.mybatis.spring annotation MapperScan;   
5 import org.springframework.context_annotationBean;   
6 import org.springframework.context.annotation.Configuration;   
7   
8 @Configuration   
9 @MapperScan("cn.itcast.mp mapper") //è®¾ç½®mapperæ¥å£çš„æ‰«æåŒ…   
10 public class MybatisPlusConfig {   
11   
12 /\*\*   
13 \*åˆ†é¡µæ’ä»¶   
14 \*/   
15 @Bean   
16 public PagingInterceptor paginationInterceptor() {
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```txt
17 return new PagingInterceptor();   
18 }   
19 }
```

ç»“æœï¼š

```java
package cn.itcast.mp;   
import cn.itcast.mp.mapping.UserMapper;   
import cn.itcast.mp.pojo.User;   
import com.baomidou.mybatisplus.core_conditions.query.Queerywrapper;   
import com.baomidou.mybatisplus.core)LMetadata.IPage;   
import com.baomidou.mybatisplusextensionplugins pagination.Page;   
import org.junit.Test;   
import org.junit runner. RunWith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context{junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest { @Autowired private ç”¨æˆ·Mapper userMapper; @Test public void testSelectPage() { QueryWrapper<User> wrapper  $=$  new QueryWrapper<user>(); wrapper.gt("age"ï¼Œ20)ï¼›//å¹´é¾„å¤§äº20å² Page<User> page  $=$  new Page  $\text{ä¸€} >$  (1,1); //æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ® IPage<iPage  $=$  this.userMapper.selectPage(page,wrapper); System.out.println("æ•°æ®æ€»æ¡æ•°ï¼š"  $^+$  iPageTOTAL()); System.out.println("æ€»é¡µæ•°ï¼š"  $^+$  iPage.getPages()); List<User> users  $=$  iPage.getRecords(); for(User user:users){ System.out.println("user  $=$  "  $^+$  user); } 1
```

```txt
1 [main] [cn.itcast.mp mapper.UserMapper.selectPage]-[DEBUG] => Preparing: SELECT COUNT(1) FROM tb_user WHERE age > ?  
2 [main] [cn.itcast.mp mapper.UserMapper.selectPage]-[DEBUG] => Parameters: 20(Integer)  
3 [main] [cn.itcast.mp mapper.UserMapper.selectPage]-[DEBUG] => Preparing: SELECT id,name,password,name,age@email FROM tb_user WHERE age > ? LIMIT ?,  
4 [main] [cn.itcast.mp mapper.UserMapper.selectPage]-[DEBUG] => Parameters: 20(Integer), 0(Long), 1(Long)  
5 [main] [cn.itcast.mp mapper.UserMapper.selectPage]-[DEBUG] <= Total: 1  
6 [main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional  
SqlSession [org.apache~-ibatis.session.Defaults.DefaultSqlSession@6ecd665]  
7 æ•°æ®æ€»æ¡æ•°ï¼š3  
8 æ€»é¡µæ•°ï¼š3  
9 user = User(id=3, userName=wangwu, password=123456, name=ç‹äº”, age=28, email=test3@itcast.cn, address=false)
```

# 3.5ã€SQLæ³¨å…¥çš„åŸç†

å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒMPåœ¨å¯åŠ¨åä¼šå°†BaseMapperä¸­çš„ä¸€ç³»åˆ—çš„æ–¹æ³•æ³¨å†Œåˆ°meppedStatementsä¸­ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ˜¯å¦‚ä½•æ³¨å…¥çš„å‘¢ï¼Ÿæµç¨‹åˆæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿä¸‹é¢æˆ‘ä»¬å°†ä¸€èµ·æ¥åˆ†æä¸‹ã€‚

åœ¨MPä¸­ï¼ŒISqlInjectorè´Ÿè´£SQLçš„æ³¨å…¥å·¥ä½œï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒAbstractSqlInjectoræ˜¯å®ƒçš„å®ç°ç±»ï¼Œå®ç°å…³ç³»å¦‚ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547178.jpg)

åœ¨AbstractSqlInjectorä¸­ï¼Œä¸»è¦æ˜¯ç”±inspectInject()æ–¹æ³•è¿›è¡Œæ³¨å…¥çš„ï¼Œå¦‚ä¸‹ï¼š

```java
1 @override   
2 public void inspectInject(MapperBuilderAssistant builderAssistant, Class<?> mapperClass) { Class<?>modelClass  $=$  extract-modelClass mapperClass); if (modelclass != null) { String className  $=$  mapperClass.toString(); Set<String> mapperRegistryCache  $=$  GlobalConfigsigs.getMapperRegistryCache(builderAssistant.getConfiguration()); if (!mapperRegistryCache.contains(name)) { List<AbstractMethod> methodList  $=$  thisgetMethodList(); if (CollectionConfigsigs.isEmpty(methodList)) { TableInfo tableInfo  $=$  TableInfoHelper.initTableInfo(builderAssistant, modelClass); //å¾ªç¯æ³¨å…¥è‡ªå®šä¹‰æ–¹æ³• methodList.forEach(m -> m.inject(builderAssistant, mapperClass, modelClass, tableInfo)); } else {
```

```txt
14 logger.debug mapperClass.toString() + ", No effective injection method was found.");   
15 }   
16 mapperRegistryCache.add(name);   
17 }   
18 }   
19 }
```

åœ¨å®ç°æ–¹æ³•ä¸­ï¼ŒmethodList.forEach(m -> m.inject(builderAssistant, mapperClass, mapperClass, tableInfo));æ˜¯å…³é”®ï¼Œå¾ªç¯éå†æ–¹æ³•ï¼Œè¿›è¡Œæ³¨å…¥ã€‚

æœ€ç»ˆè°ƒç”¨æŠ½è±¡æ–¹æ³•injectMappedStatementè¿›è¡ŒçœŸæ­£çš„æ³¨å…¥ï¼š

```txt
/* 
* æ³¨å…¥è‡ªå®šä¹‰ MappedStatement
* 
* @param mapperClass mapper æ¥å£
* @param modelClass mapper æ³›å‹
* @param tableInfo æ•°æ®åº“è¡¨åå°„ä¿¡æ¯
* @return MappedStatement
*/ 
public abstract MappedStatement injectMappedStatement(Class<?> mapperClass, class<?>
  >modelClass, TableInfo tableInfo);
```

æŸ¥çœ‹è¯¥æ–¹æ³•çš„å®ç°ï¼š

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547179.jpg)

# Object (java.lang)

# AbstractMethod (com.baomidou.mybatisplus.core.injector)

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547180.jpg)

# ä»¥SelectByldä¸ºä¾‹æŸ¥çœ‹ï¼š

```java
public class SelectByld extends AbstractMethod {   
2 @Override   
4 public MappedStatement injectMappedStatement(Class<?> mapperClass, class<?>   
modelClass, TableInfo tableInfo) { SQLMethod sqlMethod  $=$  sqlMethod.LOGIC_SELECT_BY_ID;   
6 SQLSource sqlSource  $=$  new RawSqlSource(configuration,   
String.format(sqlMethod.getSql(),   
sqlSelectColumns(tableInfo, false),   
tableInfo.getName(), tableInfo_KeyColumn(),   
tableInfo_KeyProperty(),   
tableInfo.getLogicDeleteSql(true,false)),object.class);   
10 return this.addSelectMappedStatement mapperClass, sqlMethod/method(),   
11 }   
12 }
```

å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆäº†SqlSourceå¯¹è±¡ï¼Œå†å°†SQLé€šè¿‡addSelectMappedStatementæ–¹æ³•æ·»åŠ åˆ°mippedStatementsä¸­ã€‚

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547181.jpg)

# 4ã€é…ç½®

åœ¨MPä¸­æœ‰å¤§é‡çš„é…ç½®ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯MybatisåŸç”Ÿçš„é…ç½®ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯MPçš„é…ç½®ï¼Œè¯¦æƒ…ï¼šhttps://mybatis-plus/c onfig/

ä¸‹é¢æˆ‘ä»¬å¯¹å¸¸ç”¨çš„é…ç½®åšè®²è§£ã€‚

# 4.1ã€åŸºæœ¬é…ç½®

# 4.1.1ã€configLocation

MyBatis é…ç½®æ–‡ä»¶ä½ç½®ï¼Œå¦‚æœæ‚¨æœ‰å•ç‹¬çš„ MyBatis é…ç½®ï¼Œè¯·å°†å…¶è·¯å¾„é…ç½®åˆ° configLocation ä¸­ã€‚MyBatis Configuration
çš„å…·ä½“å†…å®¹è¯·å‚è€ƒMyBatis å®˜æ–¹æ–‡æ¡£

Spring Boot :

```txt
1 mybatis-plus.config-location = classpath:mybatis-config.xml
```

Spring MVC :

```xml
<bean id="sqlSessionFactory" class="com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean">
    <property name="configLocation" value="classpath:mybatis-config.xml"/>
</bean>
```

# 4.1.2ã€mapperLocations

MyBatis Mapper æ‰€å¯¹åº”çš„ XML æ–‡ä»¶ä½ç½®ï¼Œå¦‚æœæ‚¨åœ¨ Mapper ä¸­æœ‰è‡ªå®šä¹‰æ–¹æ³•ï¼ˆXML ä¸­æœ‰è‡ªå®šä¹‰å®ç°ï¼‰ï¼Œéœ€è¦è¿›è¡Œè¯¥é…ç½®ï¼Œå‘Šè¯‰ Mapper æ‰€å¯¹åº”çš„
XML æ–‡ä»¶ä½ç½®ã€‚

Spring Boot :

```txt
1 mybatis-plus mapper-locations = classpath*:mybatis/*.xml
```

Spring MVC :

```txt
<bean id="sqlSessionFactory" class="com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean">
    <property name="mapperLocations" value="classpath*:mybatis/*.xml"/>
</bean>
```

Mavenå¤šæ¨¡å—é¡¹ç›®çš„æ‰«æè·¯å¾„éœ€ä»¥ classpath*: å¼€å¤´ï¼ˆå³åŠ è½½å¤šä¸ªjaråŒ…ä¸‹çš„XMLæ–‡ä»¶ï¼‰

æµ‹è¯•ï¼š

UserMapper.xml :

```xml
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper  
PUBLIC "--/mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="cn.itcast.mp.mapper.UserMapper">  
<select id="findByld" resultType="cn.itcast.mp.pojo.User">  
select * from tb_user where id = #{id}  
</select>  
</mapper>
```

```java
1 package cn.itcast.mp mapper;   
2   
3 import cn.itcast.mp.pojo.User;   
4 import com.baomidou.mybatisplus.core mapper.BaseMapper;   
5   
6 public interface UserMapper extends BaseMapper<User> {   
7 User findByld(Long id);   
8 }
```

# æµ‹è¯•ç”¨ä¾‹ï¼š

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp.mapping.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import org.junit.Test;   
6 import org.junit runner. RunWith;   
7 import org.springframework.beans.factory.annotation.Autowired;   
8 import org.springframework.boot.test.context.SpringBootTest;   
9 import org.springframework.test.context{junit4.SpringRunner;   
10   
11 @RunWith(SpringRunner.class)   
12 @SpringBootTest   
13 public class UserMapperTest {   
14 @Autowired   
15 private ç”¨æˆ· Mapper userMapper;   
16   
17 @Test   
18   
19 public void testSelectPage() { User user  $=$  this.userMapper.findByld(2L); System.out.println(user);
```

è¿è¡Œç»“æœï¼š

```txt
23 } 24 25}
```

```txt
ansactionj-[DEBUG] JDBC Connection [HikariProxyConnection@9063  
G] => Preparing: select \* from tb_user where id = ?  
G] => Parameters: 2(Long)  
G] <= Total: 1  
osing non transactional SqSession [org.apache.ibatis.session.  
ge=20, email=test2@itcast.cn, address=null)
```

# 4.1.3ã€typeAliasesPackage

MyBaits åˆ«ååŒ…æ‰«æè·¯å¾„ï¼Œé€šè¿‡è¯¥å±æ€§å¯ä»¥ç»™åŒ…ä¸­çš„ç±»æ³¨å†Œåˆ«åï¼Œæ³¨å†Œååœ¨ Mapper å¯¹åº”çš„ XML æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åï¼Œè€Œä¸ç”¨ä½¿ç”¨å…¨é™å®šçš„ç±»åï¼ˆå³
XML ä¸­è°ƒç”¨çš„æ—¶å€™ä¸ç”¨åŒ…å«åŒ…åï¼‰ã€‚

Spring Boot :

```txt
1 mybatis-plus.type-aliases-package = cn.itcast.mp.pojo
```

Spring MVC :  
ç¤ºä¾‹ï¼ˆSpringBootï¼‰ï¼š

```xml
<bean id="sqlSessionFactory" class="com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean">
    <property name="typeAliasesPackage" value="com.baomidou.mybatisplus_samplesquickstart(entity"/>
</bean>
```

# 4.2ã€è¿›é˜¶é…ç½®

æœ¬éƒ¨åˆ†ï¼ˆConfigurationï¼‰çš„é…ç½®å¤§éƒ½ä¸º MyBatis åŸç”Ÿæ”¯æŒçš„é…ç½®ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡ MyBatis XML é…ç½®æ–‡ä»¶çš„å½¢å¼è¿›è¡Œé…ç½®ã€‚

# 4.2.1ã€mapUnderscoreToCamelCase

- ç±»å‹ï¼šboolean
- é»˜è®¤å€¼ï¼štrue

æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™ï¼ˆcamel caseï¼‰æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—åA_COLUMNï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰åˆ°ç»å…¸Javaå±æ€§åaColumnï¼ˆé©¼å³°å‘½åï¼‰çš„ç±»ä¼¼æ˜ å°„ã€‚

æ³¨æ„ï¼š

æ­¤å±æ€§åœ¨ MyBatis ä¸­åŸé»˜è®¤å€¼ä¸º falseï¼Œåœ¨ MyBatis-Plus ä¸­ï¼Œæ­¤å±æ€§ä¹Ÿå°†ç”¨äºç”Ÿæˆæœ€ç»ˆçš„ SQL çš„ select body

å¦‚æœæ‚¨çš„æ•°æ®åº“å‘½åç¬¦åˆè§„åˆ™æ— éœ€ä½¿ç”¨ @TableField æ³¨è§£æŒ‡å®šæ•°æ®åº“å­—æ®µå

1 #å…³é—­è‡ªåŠ¨é©¼å³°æ˜ å°„ï¼Œè¯¥å‚æ•°ä¸èƒ½å’Œmybatis-plus.config-locationåŒæ—¶å­˜åœ¨  
2 mybatis-plus.configuration.map-underscore-to-camel-case=false

# 4.2.2ã€cacheEnabled

- ç±»å‹ï¼šboolean
- é»˜è®¤å€¼ï¼štrue

å…¨å±€åœ°å¼€å¯æˆ–å…³é—­é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ˜ å°„å™¨å·²ç»é…ç½®çš„ä»»ä½•ç¼“å­˜ï¼Œé»˜è®¤ä¸º trueã€‚

ç¤ºä¾‹ï¼š

1 mybatis-plus.configuration.cache-enabled=false

# 4.3ã€DBç­–ç•¥é…ç½®

# 4.3.1ã€idType

- ç±»å‹ï¼šcom.baomidou.mybatisplus_annotation.IdType  
  é»˜è®¤å€¼ï¼šID_WORKER

å…¨å±€é»˜è®¤ä¸»é”®ç±»å‹ï¼Œè®¾ç½®åï¼Œå³å¯çœç•¥å®ä½“å¯¹è±¡ä¸­çš„@TableId(type = IdType.AUTO)é…ç½®ã€‚

ç¤ºä¾‹ï¼š

SpringBoot :

1 mybatis-plus.global-config.db-config.id-type=auto

SpringMVC :

```txt
<!--è¿™é‡Œä½¿ç”¨MPæä¾›çš„sqlSessionFactoryï¼Œå®Œæˆäº†Springä¸MPçš„æ•´åˆ-->  
<bean id="sqlSessionFactory" class="com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="globalConfig">
        <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig">
            <property name="dbConfig">
                <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig">
                    <property name="idType" value="AUTO"/>
                </bean>
            </property>
        </bean>
</bean>
```

# 4.3.2ã€tablePrefix

- ç±»å‹ï¼šString
- é»˜è®¤å€¼ï¼šnu11

è¡¨åå‰ç¼€ï¼Œå…¨å±€é…ç½®åå¯çœç•¥@TableName()é…ç½®ã€‚

SpringBoot :

SpringMVC :

```txt
1 mybatis-plus.global-config.db-config.table-prefix=tb_
```

```xml
<bean id="sqlSessionFactory" class="com.baomidou.mybatisplusextension.spring.MybatisSqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="globalConfig">
        <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig">
            <property name="dbConfig">
                <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig$dbConfig">
                    <property name="idType" value="AUTO"/>
                    <property name="tablePrefix" value="tb_/">
                      </bean>
                      </property>
                      </bean>
      </property>
</bean>
```

# 5ã€æ¡ä»¶æ„é€ å™¨

åœ¨MPä¸­ï¼ŒWrapperæ¥å£çš„å®ç°ç±»å…³ç³»å¦‚ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/pdf-ocr-images/20251129153547182.jpg)

å¯ä»¥çœ‹åˆ°ï¼ŒAbstractWrapperå’ŒAbstractChainWrapperæ˜¯é‡ç‚¹å®ç°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹å­¦ä¹ AbstractWrapperä»¥åŠå…¶å­ç±»ã€‚

è¯´æ˜ï¼š

QueryWrapper(LambdaQueryWrapper) å’Œ UpdateWrapper(LambdaUpdateWrapper) çš„çˆ¶ç±»ç”¨äºç”Ÿæˆ sql çš„ where æ¡ä»¶, entity å±æ€§ä¹Ÿç”¨äºç”Ÿæˆ
sql çš„ where æ¡ä»¶æ³¨æ„: entity ç”Ÿæˆçš„ where æ¡ä»¶ä¸ä½¿ç”¨å„ä¸ª api ç”Ÿæˆçš„ where æ¡ä»¶æ²¡æœ‰ä»»ä½•å…³è”è¡Œä¸º

å®˜ç½‘æ–‡æ¡£åœ°å€ï¼šhttps://mybatis-plus/guide/wrapper.html

# 5.1ã€allEq

# 5.1.1ã€è¯´æ˜

```txt
1 allEq(Map<R, V> params)  
2 allEq(Map<R, V> params, boolean null2IsNull)  
3 allEq(boolean condition, Map<R, V> params, boolean null2IsNull)
```

# - å…¨éƒ¨eq(æˆ–ä¸ªåˆ«isEmpty)

ä¸ªåˆ«å‚æ•°è¯´æ˜: params : key ä¸ºæ•°æ®åº“å­—æ®µå, value ä¸ºå­—æ®µå€¼ null2IsNull : ä¸º true åˆ™åœ¨ map çš„ value ä¸º null æ—¶è°ƒç”¨ isNull
æ–¹æ³•,ä¸º false æ—¶åˆ™å¿½ç•¥ value ä¸º null çš„

- ä¾‹1: allEq({id:1, name:"è€ç‹", age: null}) --> id = 1 and name = 'è€ç‹' and age is null
- ä¾‹2: allEq({id:1, name:"è€ç‹", age: null}, false) ---> id = 1 and name = 'è€ç‹'

```txt
1 allEq(BiPredicate<R, V> filter, Map<R, V> params)  
2 allEq(BiPredicate<R, V> filter, Map<R, V> params, boolean null2IsNull)  
3 allEq(boolean condition, BiPredicate<R, V> filter, Map<R, V> params, boolean null2IsNull)
```

ä¸ªåˆ«å‚æ•°è¯´æ˜ï¼šfilterï¼šè¿‡æ»¤å‡½æ•°ï¼Œæ˜¯å¦å…è®¸å­—æ®µä¼ å…¥æ¯”å¯¹æ¡ä»¶ä¸­paramsä¸null2IsNullï¼šåŒä¸Š

- ä¾‹1: allEq((k, v) -> k.indexof("a") > 0, {id:1, name:"è€ç‹", age: null}) ---> name = 'è€ç‹' and age is null  
  ä¾‹2: allEq((k, v) -> k.indexof("a") > 0, {id:1, name:"è€ç‹", age: null}, false) -> name = 'è€ç‹'

# 5.1.2ã€æµ‹è¯•ç”¨ä¾‹

```java
1 package cn.itcast.mp;   
2   
3 import cn.itcast.mp mapper.UserMapper;   
4 import cn.itcast.mp.pojo.User;   
5 import com.baomidou.mybatisplus.core_conditions.query.QQueryWrapper;   
6 import org.junit.Test;   
7 import org.junit runner.RunWith;   
8 import org.springframework.beans.factory.annotation.Autowired;   
9 import org.springframework.boot.test.context.SpringBootTest;   
10 import org.springframework.test.context.Junit4.SpringRunner;   
11   
12 import java.utillzHashMap;   
13 import java.util.List;   
14 import java.util.Map;   
15   
16 @RunWith(SpringRunner.class)   
17 @SpringBootTest   
18 public class UserMapperTest {   
19   
20 @Autowired   
21 private UserMapper userMapper;
```

```java
@Test public void testwrapper() { QueryWrapper  $<$  User> wrapper  $=$  new QueryWrapper<>(); //è®¾ç½®æ¡ä»¶ Map<String,object> params  $=$  new HashMap<>(); params.put("name","æ›¹æ“"); params.put("age","20"); params.put("password",null); //wrapper.allEq.params);//SELECT \* FROM tb_user WHERE password IS NULL AND name  $=$  ?AND age  $=$  ? //wrapper.allEq.params,false); //SELECT \* FROM tb_user WHERE name  $=$  ?AND age  $=$  ? //wrapper.allEq((k,v) -> (k.equals("name") || k.equals("age")) ,params);//SELECT \* FROM tb_user WHERE name  $=$  ?AND age  $=$  ? List<User> users  $=$  this.userMapper.selectList wrapper); for(User user : users){ System.out.println(user); } }
```

# 5.2ã€åŸºæœ¬æ¯”è¾ƒæ“ä½œ

- eq

$\mathrm{o}$  ç­‰äº  $=$

ne

$\mathrm{o}$  ä¸ç­‰äº<>

gt

$\mathrm{O}$  å¤§äº  $\succ$

- ge

$\mathrm{O}$  å¤§äºç­‰äº  $\mathrm{>> = }$

It

$\circ$  å°äº<

le

$\circ$  å°äºç­‰äº  $<=$

- between

o BETWEENå€¼1ANDå€¼2

notBetween

- NOT BETWEEN å€¼1 AND å€¼2

in

å­—æ®µIN(value.get(0),value.get(1)ï¼Œ...)

notIn

ã€‚å­—æ®µNOTIN(v0,v1,...)

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
package cn.itcast.mp;   
import cn.itcast.mp)mapper.UserMapper;   
import cn.itcast.mp.pojo.User;   
import com.baomidou.mybatisplus.core_conditions.query(Querywrapper;   
import org.junit.Test;   
import org.junit runner.Runwith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context.Junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest { @Autowired private ç”¨æˆ·Mapper userMapper; @Test public void testEq() { QueryWrapper<user> wrapper  $=$  new QueryWrapper<>(); //SELECT id,userName,password,name,age@email FROM tb_user WHERE password  $= ?$  AND age  $>= ?$  AND name IN  $(??,??,?)$  wrapper EQ("password","123456") .ge("age",20) .in("name","æå››","ç‹äº”","èµµå…­"); List<user> users  $=$  this.userMapper.selectList(wrapper); for (User user : users){ System.out.println(user); } 1
```

# 5.3ã€æ¨¡ç³ŠæŸ¥è¯¢

like

LIKE'%'

â—‹ ä¾‹: like("name", "ç‹")--> name like '%ç‹%'

notLike

- NOT LIKE '%å€¼%'

â—‹ ä¾‹: notLike("name", "ç‹") ---> name not like '%ç‹%'

- likeLeft

LIKE  $\%$  å€¼  
ä¾‹:likeLeft("name","ç‹")-->name like '%ç‹'

- likeRight

LIKE'å€¼%  
â—‹ä¾‹: likeRight("name", "ç‹")-->name like 'ç‹%'

æµ‹è¯•ç”¨ä¾‹ï¼š

```groovy
package cn.itcast.mp;   
import cn.itcast.mp)mapper.UserMapper;   
import cn.itcast.mp.pojo.User;   
import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
import org.junit.Test;   
import org.junit runner.RunWith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context.Junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest {   
    @Autowired   
    private UserMapper userMapper;   
    @Test   
    public void testwrapper() { QueryWrapper <User> wrapper = new QueryWrapper <>();   
    //SELECT id, user_name, password, name, age, email FROM tb_user WHERE name LIKE ?   
    //Parameters: %æ›¹%(String)   
    wrapper like ("name", "æ›¹");   
    List <User> users = this.UserMapper.selectList(wrapper);   
    for (User user : users) { System.out.println(user); }   
}
```

# 5.4ã€æ’åº

- orderBy

$\circ$  æ’åºï¼šORDER BYå­—æ®µ,...

ä¾‹: orderBy(true, true, "id", "name")-->order by id ASC, name ASC

- orderByAsc

æ’åºï¼šORDER BYå­—æ®µ,...ASC  
ä¾‹: orderByAsc("id", "name")-->order by id ASC, name ASC

- orderByDesc

æ’åºï¼šORDER BYå­—æ®µ,...DESC  
ä¾‹: orderByDesc("id", "name") --->order by id DESC, name DESC

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
package cn.itcast.mp;   
import cn.itcast.mp)mapper.UserMapper;   
import cn.itcast.mp.pojo.User;   
import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
import org.junit.Test;   
import org.junit runner.JrunWith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.context.Junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest { @Autowired private ç”¨æˆ·Mapper userMapper; @Test public void testwrapper(){ QueryWrapper<user> wrapper  $=$  new QueryWrapper<>(); //SELECT id,name,password,name,age@email FROM tb_user ORDER BY age DESC wrapper.orderByDesc("age"); List<user> users  $=$  this.userMapper.selectList(wrapper); for(User user:users){ System.out.println(user); }   
}
```

# 5.5ã€é€»è¾‘æŸ¥è¯¢

or

â—‹æ‹¼æ¥OR  
â—‹ ä¸»åŠ¨è°ƒç”¨ or è¡¨ç¤ºç´§æ¥ç€ä¸‹ä¸€ä¸ªæ–¹æ³•ä¸æ˜¯ç”¨ and è¿æ¥!(ä¸è°ƒç”¨ or åˆ™é»˜è®¤ä¸ºä½¿ç”¨ and è¿æ¥)

and

o AND åµŒå¥—  
ä¾‹: and(i -> i(eq("name", "æç™½").ne("status", "æ´»ç€")))-->and (name = 'æç™½' and status <> 'æ´»ç€')

æµ‹è¯•ç”¨ä¾‹ï¼š

```java
package cn.itcast.mp;   
import cn.itcast.mp)mapper.UserMapper;   
import cn.itcast.mp.pojo.User;   
import com.baomidou.mybatisplus.core_conditions.query(QueryWrapper;   
import org.junit.Test;   
import org.junit runnerR. Runwith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context{j unit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest { @Autowired private ç”¨æˆ·Mapper userMapper; @Test public void testwrapper(){ QueryWrapper<User> wrapper  $=$  new QueryWrapper<>(); //SELECT id,user_name,password,name,age@email FROM tb_user WHERE name  $= ?$  OR age  $= ?$  wrapper(eq("name","æå››").or().eq("age"ï¼Œ24); List<User> users  $=$  this.userMapper.selectList(wrapper); for (User user : users){ System.out.println(user); } 1
```

# 5.6ã€select

åœ¨MPæŸ¥è¯¢ä¸­ï¼Œé»˜è®¤æŸ¥è¯¢æ‰€æœ‰çš„å­—æ®µï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥é€šè¿‡selectæ–¹æ³•è¿›è¡ŒæŒ‡å®šå­—æ®µã€‚

```txt
package cn.itcast.mp;   
import cn.itcast.mp mapper.UserMapper;   
import cn.itcast.mp.pojo.User;
```

```java
import com.baomidou.mybatisplus.core_conditions.query(Querywrapper;   
import org.junit.Test;   
import org.junit runner.Runwith;   
import org.springframework.beans.factory.annotation.Autowired;   
import org.springframework.boot.test.context.SpringBootTest;   
import org.springframework.test.context.Junit4.SpringRunner;   
import java.util.List;   
@RunWith(SpringRunner.class)   
@SpringBootTest   
public class UserMapperTest { @Autowired private ç”¨æˆ·Mapper userMapper; @Test public void testwrapper() { QueryWrapper<User> wrapper  $=$  new QueryWrapper<>(); //SELECT id,name,age FROM tb_user WHERE name  $=$  ? OR age  $=$  ? wrapper(eq("name","æå››") .or() .eq("age",24) .select("id","name","age"); List<user> users  $=$  this.userMapper.selectList wrapper); for (User user : users) { System.out.println(user); } 1
```