#### 动因

博士重构表结构后针对需要整改的接口进行整理，输出接口重构文档，粗粒度统计共计18个接口。

根据需求修改用于演示系统的数据展示问题。

给首页造数据，保证浙江省话务在2w8范围上下波动。

测试重构质检表的sql数据查询。

MaaS-AI资源池支撑的应用要统一迁到IT资源池（12-31前），动因需要申请账号更换模型，目前流程正在进行中，必要信息已反馈给艺鑫。艺鑫已向省份进行反馈，暂无消息。

###### 引入分表逻辑和配置

> **分表问题**
> ：参照质检项目的分表实现，目前分表给的表结构设计使用自定义分片键sharding_key，需要在业务代码里计算并指定该sharding_key。原理是底层自定义代码对原始sql进行拦截，通过该字段在逻辑上进行表名的匹配和拼接。
`已违背分片设计原则，每个分表都有重复的 sharding_key 值。`
> 对于话务、话务标签、话务热词热点现已修改为话务表`realtime_textcontent_info`的calltime作为这三张表的分片键。
> **原因**：话务、话务标签、话务热词热点这三张表属于强关联。一通话务有一个热点，一个归属的聚类热点，5个或者多个热词，一个三级标签（反推二级、一级）。因此根据话务calltime作为分片键是适合的。
>
>![image.png](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/hj-images/20251219163251540.png)
> ![image.png](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/hj-images/20251219163948520.png)

###### 截止目前，已完成分表后重构首页聚类热点查询、普通热点查询、热词接口查询

![image.png](https://cdn.jsdelivr.net/gh/mayuhaos/blog-images@main/hj-images/20251219164603040.png)


  